(function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)})(function(t){t.ui=t.ui||{},t.ui.version="1.12.1";var e=0,i=Array.prototype.slice;t.cleanData=function(e){return function(i){var s,n,o;for(o=0;null!=(n=i[o]);o++)try{s=t._data(n,"events"),s&&s.remove&&t(n).triggerHandler("remove")}catch(a){}e(i)}}(t.cleanData),t.widget=function(e,i,s){var n,o,a,r={},l=e.split(".")[0];e=e.split(".")[1];var h=l+"-"+e;return s||(s=i,i=t.Widget),t.isArray(s)&&(s=t.extend.apply(null,[{}].concat(s))),t.expr[":"][h.toLowerCase()]=function(e){return!!t.data(e,h)},t[l]=t[l]||{},n=t[l][e],o=t[l][e]=function(t,e){return this._createWidget?(arguments.length&&this._createWidget(t,e),void 0):new o(t,e)},t.extend(o,n,{version:s.version,_proto:t.extend({},s),_childConstructors:[]}),a=new i,a.options=t.widget.extend({},a.options),t.each(s,function(e,s){return t.isFunction(s)?(r[e]=function(){function t(){return i.prototype[e].apply(this,arguments)}function n(t){return i.prototype[e].apply(this,t)}return function(){var e,i=this._super,o=this._superApply;return this._super=t,this._superApply=n,e=s.apply(this,arguments),this._super=i,this._superApply=o,e}}(),void 0):(r[e]=s,void 0)}),o.prototype=t.widget.extend(a,{widgetEventPrefix:n?a.widgetEventPrefix||e:e},r,{constructor:o,namespace:l,widgetName:e,widgetFullName:h}),n?(t.each(n._childConstructors,function(e,i){var s=i.prototype;t.widget(s.namespace+"."+s.widgetName,o,i._proto)}),delete n._childConstructors):i._childConstructors.push(o),t.widget.bridge(e,o),o},t.widget.extend=function(e){for(var s,n,o=i.call(arguments,1),a=0,r=o.length;r>a;a++)for(s in o[a])n=o[a][s],o[a].hasOwnProperty(s)&&void 0!==n&&(e[s]=t.isPlainObject(n)?t.isPlainObject(e[s])?t.widget.extend({},e[s],n):t.widget.extend({},n):n);return e},t.widget.bridge=function(e,s){var n=s.prototype.widgetFullName||e;t.fn[e]=function(o){var a="string"==typeof o,r=i.call(arguments,1),l=this;return a?this.length||"instance"!==o?this.each(function(){var i,s=t.data(this,n);return"instance"===o?(l=s,!1):s?t.isFunction(s[o])&&"_"!==o.charAt(0)?(i=s[o].apply(s,r),i!==s&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0):t.error("no such method '"+o+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; "+"attempted to call method '"+o+"'")}):l=void 0:(r.length&&(o=t.widget.extend.apply(null,[o].concat(r))),this.each(function(){var e=t.data(this,n);e?(e.option(o||{}),e._init&&e._init()):t.data(this,n,new s(o,this))})),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(i,s){s=t(s||this.defaultElement||this)[0],this.element=t(s),this.uuid=e++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),this.classesElementLookup={},s!==this&&(t.data(s,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===s&&this.destroy()}}),this.document=t(s.style?s.ownerDocument:s.document||s),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),i),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy(),t.each(this.classesElementLookup,function(t,i){e._removeClass(i,t)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var s,n,o,a=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(a={},s=e.split("."),e=s.shift(),s.length){for(n=a[e]=t.widget.extend({},this.options[e]),o=0;s.length-1>o;o++)n[s[o]]=n[s[o]]||{},n=n[s[o]];if(e=s.pop(),1===arguments.length)return void 0===n[e]?null:n[e];n[e]=i}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];a[e]=i}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(e){var i,s,n;for(i in e)n=this.classesElementLookup[i],e[i]!==this.options.classes[i]&&n&&n.length&&(s=t(n.get()),this._removeClass(n,i),s.addClass(this._classes({element:s,keys:i,classes:e,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(e){function i(i,o){var a,r;for(r=0;i.length>r;r++)a=n.classesElementLookup[i[r]]||t(),a=e.add?t(t.unique(a.get().concat(e.element.get()))):t(a.not(e.element).get()),n.classesElementLookup[i[r]]=a,s.push(i[r]),o&&e.classes[i[r]]&&s.push(e.classes[i[r]])}var s=[],n=this;return e=t.extend({element:this.element,classes:this.options.classes||{}},e),this._on(e.element,{remove:"_untrackClassesElement"}),e.keys&&i(e.keys.match(/\S+/g)||[],!0),e.extra&&i(e.extra.match(/\S+/g)||[]),s.join(" ")},_untrackClassesElement:function(e){var i=this;t.each(i.classesElementLookup,function(s,n){-1!==t.inArray(e.target,n)&&(i.classesElementLookup[s]=t(n.not(e.target).get()))})},_removeClass:function(t,e,i){return this._toggleClass(t,e,i,!1)},_addClass:function(t,e,i){return this._toggleClass(t,e,i,!0)},_toggleClass:function(t,e,i,s){s="boolean"==typeof s?s:i;var n="string"==typeof t||null===t,o={extra:n?e:i,keys:n?t:e,element:n?this.element:t,add:s};return o.element.toggleClass(this._classes(o),s),this},_on:function(e,i,s){var n,o=this;"boolean"!=typeof e&&(s=i,i=e,e=!1),s?(i=n=t(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,n=this.widget()),t.each(s,function(s,a){function r(){return e||o.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof a?o[a]:a).apply(o,arguments):void 0}"string"!=typeof a&&(r.guid=a.guid=a.guid||r.guid||t.guid++);var l=s.match(/^([\w:-]*)\s*(.*)$/),h=l[1]+o.eventNamespace,c=l[2];c?n.on(h,c,r):i.on(h,r)})},_off:function(e,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(i).off(i),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){function i(){return("string"==typeof t?s[t]:t).apply(s,arguments)}var s=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(t(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(t(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,i,s){var n,o,a=this.options[e];if(s=s||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(n in o)n in i||(i[n]=o[n]);return this.element.trigger(i,s),!(t.isFunction(a)&&a.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(s,n,o){"string"==typeof n&&(n={effect:n});var a,r=n?n===!0||"number"==typeof n?i:n.effect||i:e;n=n||{},"number"==typeof n&&(n={duration:n}),a=!t.isEmptyObject(n),n.complete=o,n.delay&&s.delay(n.delay),a&&t.effects&&t.effects.effect[r]?s[e](n):r!==e&&s[r]?s[r](n.duration,n.easing,o):s.queue(function(i){t(this)[e](),o&&o.call(s[0]),i()})}}),t.widget,t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,s){return!!t.data(e,s[3])}}),t.fn.extend({disableSelection:function(){var t="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(t+".ui-disableSelection",function(t){t.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}}),t.fn.scrollParent=function(e){var i=this.css("position"),s="absolute"===i,n=e?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter(function(){var e=t(this);return s&&"static"===e.css("position")?!1:n.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==i&&o.length?o:t(this[0].ownerDocument||document)},t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var s=!1;t(document).on("mouseup",function(){s=!1}),t.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).on("click."+this.widgetName,function(i){return!0===t.data(i.target,e.widgetName+".preventClickEvent")?(t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!s){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var i=this,n=1===e.which,o="string"==typeof this.options.cancel&&e.target.nodeName?t(e.target).closest(this.options.cancel).length:!1;return n&&!o&&this._mouseCapture(e)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(e)!==!1,!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),s=!0,!0)):!0}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||9>document.documentMode)&&!e.button)return this._mouseUp(e);if(!e.which)if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,s=!1,e.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),t.ui.plugin={add:function(e,i,s){var n,o=t.ui[e].prototype;for(n in s)o.plugins[n]=o.plugins[n]||[],o.plugins[n].push([i,s[n]])},call:function(t,e,i,s){var n,o=t.plugins[e];if(o&&(s||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(n=0;o.length>n;n++)t.options[o[n][0]]&&o[n][1].apply(t.element,i)}},t.widget("ui.resizable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseFloat(t)||0},_isNumber:function(t){return!isNaN(parseFloat(t))},_hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var s=i&&"left"===i?"scrollLeft":"scrollTop",n=!1;return e[s]>0?!0:(e[s]=1,n=e[s]>0,e[s]=0,n)},_create:function(){var e,i=this.options,s=this;this._addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,e={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(e),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(e),this._proportionallyResize()),this._setupHandles(),i.autoHide&&t(this.element).on("mouseenter",function(){i.disabled||(s._removeClass("ui-resizable-autohide"),s._handles.show())}).on("mouseleave",function(){i.disabled||s.resizing||(s._addClass("ui-resizable-autohide"),s._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,i=function(e){t(e).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_setOption:function(t,e){switch(this._super(t,e),t){case"handles":this._removeHandles(),this._setupHandles();break;default:}},_setupHandles:function(){var e,i,s,n,o,a=this.options,r=this;if(this.handles=a.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=t(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),s=this.handles.split(","),this.handles={},i=0;s.length>i;i++)e=t.trim(s[i]),n="ui-resizable-"+e,o=t("<div>"),this._addClass(o,"ui-resizable-handle "+n),o.css({zIndex:a.zIndex}),this.handles[e]=".ui-resizable-"+e,this.element.append(o);this._renderAxis=function(e){var i,s,n,o;e=e||this.element;for(i in this.handles)this.handles[i].constructor===String?this.handles[i]=this.element.children(this.handles[i]).first().show():(this.handles[i].jquery||this.handles[i].nodeType)&&(this.handles[i]=t(this.handles[i]),this._on(this.handles[i],{mousedown:r._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(s=t(this.handles[i],this.element),o=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth(),n=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),e.css(n,o),this._proportionallyResize()),this._handles=this._handles.add(this.handles[i])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){r.resizing||(this.className&&(o=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),r.axis=o&&o[1]?o[1]:"se")}),a.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(e){var i,s,n=!1;for(i in this.handles)s=t(this.handles[i])[0],(s===e.target||t.contains(s,e.target))&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(e){var i,s,n,o=this.options,a=this.element;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css("left")),s=this._num(this.helper.css("top")),o.containment&&(i+=t(o.containment).scrollLeft()||0,s+=t(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:s},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:a.width(),height:a.height()},this.originalSize=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()},this.originalPosition={left:i,top:s},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,n=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===n?this.axis+"-resize":n),this._addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var i,s,n=this.originalMousePosition,o=this.axis,a=e.pageX-n.left||0,r=e.pageY-n.top||0,l=this._change[o];return this._updatePrevProperties(),l?(i=l.apply(this,[e,a,r]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(i=this._updateRatio(i,e)),i=this._respectSize(i,e),this._updateCache(i),this._propagate("resize",e),s=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(s)||(this._updatePrevProperties(),this._trigger("resize",e,this.ui()),this._applyChanges()),!1):!1},_mouseStop:function(e){this.resizing=!1;var i,s,n,o,a,r,l,h=this.options,c=this;return this._helper&&(i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),n=s&&this._hasScroll(i[0],"left")?0:c.sizeDiff.height,o=s?0:c.sizeDiff.width,a={width:c.helper.width()-o,height:c.helper.height()-n},r=parseFloat(c.element.css("left"))+(c.position.left-c.originalPosition.left)||null,l=parseFloat(c.element.css("top"))+(c.position.top-c.originalPosition.top)||null,h.animate||this.element.css(t.extend(a,{top:l,left:r})),c.helper.height(c.size.height),c.helper.width(c.size.width),this._helper&&!h.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};return this.position.top!==this.prevPosition.top&&(t.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(t.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(t.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(t.height=this.size.height+"px"),this.helper.css(t),t},_updateVirtualBoundaries:function(t){var e,i,s,n,o,a=this.options;o={minWidth:this._isNumber(a.minWidth)?a.minWidth:0,maxWidth:this._isNumber(a.maxWidth)?a.maxWidth:1/0,minHeight:this._isNumber(a.minHeight)?a.minHeight:0,maxHeight:this._isNumber(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||t)&&(e=o.minHeight*this.aspectRatio,s=o.minWidth/this.aspectRatio,i=o.maxHeight*this.aspectRatio,n=o.maxWidth/this.aspectRatio,e>o.minWidth&&(o.minWidth=e),s>o.minHeight&&(o.minHeight=s),o.maxWidth>i&&(o.maxWidth=i),o.maxHeight>n&&(o.maxHeight=n)),this._vBoundaries=o},_updateCache:function(t){this.offset=this.helper.offset(),this._isNumber(t.left)&&(this.position.left=t.left),this._isNumber(t.top)&&(this.position.top=t.top),this._isNumber(t.height)&&(this.size.height=t.height),this._isNumber(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,i=this.size,s=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===s&&(t.left=e.left+(i.width-t.width),t.top=null),"nw"===s&&(t.top=e.top+(i.height-t.height),t.left=e.left+(i.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,i=this.axis,s=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,n=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,o=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,a=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,r=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,h=/sw|nw|w/.test(i),c=/nw|ne|n/.test(i);return o&&(t.width=e.minWidth),a&&(t.height=e.minHeight),s&&(t.width=e.maxWidth),n&&(t.height=e.maxHeight),o&&h&&(t.left=r-e.minWidth),s&&h&&(t.left=r-e.maxWidth),a&&c&&(t.top=l-e.minHeight),n&&c&&(t.top=l-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_getPaddingPlusBorderDimensions:function(t){for(var e=0,i=[],s=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],n=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];4>e;e++)i[e]=parseFloat(s[e])||0,i[e]+=parseFloat(n[e])||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var t,e=0,i=this.helper||this.element;this._proportionallyResizeElements.length>e;e++)t=this._proportionallyResizeElements[e],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(t)),t.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var e=this.element,i=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize,s=this.originalPosition;return{left:s.left+e,width:i.width-e}},n:function(t,e,i){var s=this.originalSize,n=this.originalPosition;return{top:n.top+i,height:s.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},sw:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,s]))},ne:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},nw:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,s]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),"resize"!==e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var i=t(this).resizable("instance"),s=i.options,n=i._proportionallyResizeElements,o=n.length&&/textarea/i.test(n[0].nodeName),a=o&&i._hasScroll(n[0],"left")?0:i.sizeDiff.height,r=o?0:i.sizeDiff.width,l={width:i.size.width-r,height:i.size.height-a},h=parseFloat(i.element.css("left"))+(i.position.left-i.originalPosition.left)||null,c=parseFloat(i.element.css("top"))+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(l,c&&h?{top:c,left:h}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseFloat(i.element.css("width")),height:parseFloat(i.element.css("height")),top:parseFloat(i.element.css("top")),left:parseFloat(i.element.css("left"))};n&&n.length&&t(n[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var e,i,s,n,o,a,r,l=t(this).resizable("instance"),h=l.options,c=l.element,u=h.containment,d=u instanceof t?u.get(0):/parent/.test(u)?c.parent().get(0):u;d&&(l.containerElement=t(d),/document/.test(u)||u===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(e=t(d),i=[],t(["Top","Right","Left","Bottom"]).each(function(t,s){i[t]=l._num(e.css("padding"+s))}),l.containerOffset=e.offset(),l.containerPosition=e.position(),l.containerSize={height:e.innerHeight()-i[3],width:e.innerWidth()-i[1]},s=l.containerOffset,n=l.containerSize.height,o=l.containerSize.width,a=l._hasScroll(d,"left")?d.scrollWidth:o,r=l._hasScroll(d)?d.scrollHeight:n,l.parentData={element:d,left:s.left,top:s.top,width:a,height:r}))},resize:function(e){var i,s,n,o,a=t(this).resizable("instance"),r=a.options,l=a.containerOffset,h=a.position,c=a._aspectRatio||e.shiftKey,u={top:0,left:0},d=a.containerElement,p=!0;d[0]!==document&&/static/.test(d.css("position"))&&(u=l),h.left<(a._helper?l.left:0)&&(a.size.width=a.size.width+(a._helper?a.position.left-l.left:a.position.left-u.left),c&&(a.size.height=a.size.width/a.aspectRatio,p=!1),a.position.left=r.helper?l.left:0),h.top<(a._helper?l.top:0)&&(a.size.height=a.size.height+(a._helper?a.position.top-l.top:a.position.top),c&&(a.size.width=a.size.height*a.aspectRatio,p=!1),a.position.top=a._helper?l.top:0),n=a.containerElement.get(0)===a.element.parent().get(0),o=/relative|absolute/.test(a.containerElement.css("position")),n&&o?(a.offset.left=a.parentData.left+a.position.left,a.offset.top=a.parentData.top+a.position.top):(a.offset.left=a.element.offset().left,a.offset.top=a.element.offset().top),i=Math.abs(a.sizeDiff.width+(a._helper?a.offset.left-u.left:a.offset.left-l.left)),s=Math.abs(a.sizeDiff.height+(a._helper?a.offset.top-u.top:a.offset.top-l.top)),i+a.size.width>=a.parentData.width&&(a.size.width=a.parentData.width-i,c&&(a.size.height=a.size.width/a.aspectRatio,p=!1)),s+a.size.height>=a.parentData.height&&(a.size.height=a.parentData.height-s,c&&(a.size.width=a.size.height*a.aspectRatio,p=!1)),p||(a.position.left=a.prevPosition.left,a.position.top=a.prevPosition.top,a.size.width=a.prevSize.width,a.size.height=a.prevSize.height)},stop:function(){var e=t(this).resizable("instance"),i=e.options,s=e.containerOffset,n=e.containerPosition,o=e.containerElement,a=t(e.helper),r=a.offset(),l=a.outerWidth()-e.sizeDiff.width,h=a.outerHeight()-e.sizeDiff.height;e._helper&&!i.animate&&/relative/.test(o.css("position"))&&t(this).css({left:r.left-n.left-s.left,width:l,height:h}),e._helper&&!i.animate&&/static/.test(o.css("position"))&&t(this).css({left:r.left-n.left-s.left,width:l,height:h})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).resizable("instance"),i=e.options;t(i.alsoResize).each(function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseFloat(e.width()),height:parseFloat(e.height()),left:parseFloat(e.css("left")),top:parseFloat(e.css("top"))})})},resize:function(e,i){var s=t(this).resizable("instance"),n=s.options,o=s.originalSize,a=s.originalPosition,r={height:s.size.height-o.height||0,width:s.size.width-o.width||0,top:s.position.top-a.top||0,left:s.position.left-a.left||0};t(n.alsoResize).each(function(){var e=t(this),s=t(this).data("ui-resizable-alsoresize"),n={},o=e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(o,function(t,e){var i=(s[e]||0)+(r[e]||0);i&&i>=0&&(n[e]=i||null)}),e.css(n)})},stop:function(){t(this).removeData("ui-resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).resizable("instance"),i=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}),e._addClass(e.ghost,"ui-resizable-ghost"),t.uiBackCompat!==!1&&"string"==typeof e.options.ghost&&e.ghost.addClass(this.options.ghost),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).resizable("instance");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).resizable("instance");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e,i=t(this).resizable("instance"),s=i.options,n=i.size,o=i.originalSize,a=i.originalPosition,r=i.axis,l="number"==typeof s.grid?[s.grid,s.grid]:s.grid,h=l[0]||1,c=l[1]||1,u=Math.round((n.width-o.width)/h)*h,d=Math.round((n.height-o.height)/c)*c,p=o.width+u,f=o.height+d,g=s.maxWidth&&p>s.maxWidth,m=s.maxHeight&&f>s.maxHeight,_=s.minWidth&&s.minWidth>p,v=s.minHeight&&s.minHeight>f;s.grid=l,_&&(p+=h),v&&(f+=c),g&&(p-=h),m&&(f-=c),/^(se|s|e)$/.test(r)?(i.size.width=p,i.size.height=f):/^(ne)$/.test(r)?(i.size.width=p,i.size.height=f,i.position.top=a.top-d):/^(sw)$/.test(r)?(i.size.width=p,i.size.height=f,i.position.left=a.left-u):((0>=f-c||0>=p-h)&&(e=i._getPaddingPlusBorderDimensions(this)),f-c>0?(i.size.height=f,i.position.top=a.top-d):(f=c-e.height,i.size.height=f,i.position.top=a.top+o.height-f),p-h>0?(i.size.width=p,i.position.left=a.left-u):(p=h-e.width,i.size.width=p,i.position.left=a.left+o.width-p))}}),t.ui.resizable,t.widget("ui.sortable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,i){return t>=e&&e+i>t},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_setHandleClassName:function(){var e=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),t.each(this.items,function(){e._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();
for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(e,i){var s=null,n=!1,o=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(e),t(e.target).parents().each(function(){return t.data(this,o.widgetName+"-item")===o?(s=t(this),!1):void 0}),t.data(e.target,o.widgetName+"-item")===o&&(s=t(e.target)),s?!this.options.handle||i||(t(this.options.handle,s).find("*").addBack().each(function(){this===e.target&&(n=!0)}),n)?(this.currentItem=s,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(e,i,s){var n,o,a=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),a.containment&&this._setContainment(),a.cursor&&"auto"!==a.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",a.cursor),this.storedStylesheet=t("<style>*{ cursor: "+a.cursor+" !important; }</style>").appendTo(o)),a.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",a.opacity)),a.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",a.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!s)for(n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!a.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var i,s,n,o,a=this.options,r=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<a.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+a.scrollSpeed:e.pageY-this.overflowOffset.top<a.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-a.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<a.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+a.scrollSpeed:e.pageX-this.overflowOffset.left<a.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-a.scrollSpeed)):(e.pageY-this.document.scrollTop()<a.scrollSensitivity?r=this.document.scrollTop(this.document.scrollTop()-a.scrollSpeed):this.window.height()-(e.pageY-this.document.scrollTop())<a.scrollSensitivity&&(r=this.document.scrollTop(this.document.scrollTop()+a.scrollSpeed)),e.pageX-this.document.scrollLeft()<a.scrollSensitivity?r=this.document.scrollLeft(this.document.scrollLeft()-a.scrollSpeed):this.window.width()-(e.pageX-this.document.scrollLeft())<a.scrollSensitivity&&(r=this.document.scrollLeft(this.document.scrollLeft()+a.scrollSpeed))),r!==!1&&t.ui.ddmanager&&!a.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(s=this.items[i],n=s.item[0],o=this._intersectsWithPointer(s),o&&s.instance===this.currentContainer&&n!==this.currentItem[0]&&this.placeholder[1===o?"next":"prev"]()[0]!==n&&!t.contains(this.placeholder[0],n)&&("semi-dynamic"===this.options.type?!t.contains(this.element[0],n):!0)){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(s))break;this._rearrange(e,s),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,i){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var s=this,n=this.placeholder.offset(),o=this.options.axis,a={};o&&"x"!==o||(a.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(a.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(a,parseInt(this.options.revert,10)||500,function(){s._clear(e)})}else this._clear(e,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new t.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},t(i).each(function(){var i=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);i&&s.push((e.key||i[1]+"[]")+"="+(e.key&&e.expression?i[1]:i[2]))}),!s.length&&e.key&&s.push(e.key+"="),s.join("&")},toArray:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},i.each(function(){s.push(t(e.item||this).attr(e.attribute||"id")||"")}),s},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,s=this.positionAbs.top,n=s+this.helperProportions.height,o=t.left,a=o+t.width,r=t.top,l=r+t.height,h=this.offset.click.top,c=this.offset.click.left,u="x"===this.options.axis||s+h>r&&l>s+h,d="y"===this.options.axis||e+c>o&&a>e+c,p=u&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?p:e+this.helperProportions.width/2>o&&a>i-this.helperProportions.width/2&&s+this.helperProportions.height/2>r&&l>n-this.helperProportions.height/2},_intersectsWithPointer:function(t){var e,i,s="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),n="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),o=s&&n;return o?(e=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection(),this.floating?"right"===i||"down"===e?2:1:e&&("down"===e?2:1)):!1},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),s=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection();return this.floating&&n?"right"===n&&i||"left"===n&&!i:s&&("down"===s&&e||"up"===s&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){function i(){r.push(this)}var s,n,o,a,r=[],l=[],h=this._connectWith();if(h&&e)for(s=h.length-1;s>=0;s--)for(o=t(h[s],this.document[0]),n=o.length-1;n>=0;n--)a=t.data(o[n],this.widgetFullName),a&&a!==this&&!a.options.disabled&&l.push([t.isFunction(a.options.items)?a.options.items.call(a.element):t(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a]);for(l.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),s=l.length-1;s>=0;s--)l[s][0].each(i);return t(r)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var i=0;e.length>i;i++)if(e[i]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var i,s,n,o,a,r,l,h,c=this.items,u=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(i=d.length-1;i>=0;i--)for(n=t(d[i],this.document[0]),s=n.length-1;s>=0;s--)o=t.data(n[s],this.widgetFullName),o&&o!==this&&!o.options.disabled&&(u.push([t.isFunction(o.options.items)?o.options.items.call(o.element[0],e,{item:this.currentItem}):t(o.options.items,o.element),o]),this.containers.push(o));for(i=u.length-1;i>=0;i--)for(a=u[i][1],r=u[i][0],s=0,h=r.length;h>s;s++)l=t(r[s]),l.data(this.widgetName+"-item",a),c.push({item:l,instance:a,width:0,height:0,left:0,top:0})},refreshPositions:function(e){this.floating=this.items.length?"x"===this.options.axis||this._isFloating(this.items[0].item):!1,this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,s,n,o;for(i=this.items.length-1;i>=0;i--)s=this.items[i],s.instance!==this.currentContainer&&this.currentContainer&&s.item[0]!==this.currentItem[0]||(n=this.options.toleranceElement?t(this.options.toleranceElement,s.item):s.item,e||(s.width=n.outerWidth(),s.height=n.outerHeight()),o=n.offset(),s.left=o.left,s.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)o=this.containers[i].element.offset(),this.containers[i].containerCache.left=o.left,this.containers[i].containerCache.top=o.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(e){e=e||this;var i,s=e.options;s.placeholder&&s.placeholder.constructor!==String||(i=s.placeholder,s.placeholder={element:function(){var s=e.currentItem[0].nodeName.toLowerCase(),n=t("<"+s+">",e.document[0]);return e._addClass(n,"ui-sortable-placeholder",i||e.currentItem[0].className)._removeClass(n,"ui-sortable-helper"),"tbody"===s?e._createTrPlaceholder(e.currentItem.find("tr").eq(0),t("<tr>",e.document[0]).appendTo(n)):"tr"===s?e._createTrPlaceholder(e.currentItem,n):"img"===s&&n.attr("src",e.currentItem.attr("src")),i||n.css("visibility","hidden"),n},update:function(t,n){(!i||s.forcePlaceholderSize)&&(n.height()||n.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),n.width()||n.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(s.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),s.placeholder.update(e,e.placeholder)},_createTrPlaceholder:function(e,i){var s=this;e.children().each(function(){t("<td>&#160;</td>",s.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(i)})},_contactContainers:function(e){var i,s,n,o,a,r,l,h,c,u,d=null,p=null;for(i=this.containers.length-1;i>=0;i--)if(!t.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(d&&t.contains(this.containers[i].element[0],d.element[0]))continue;d=this.containers[i],p=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",e,this._uiHash(this)),this.containers[i].containerCache.over=0);if(d)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",e,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(n=1e4,o=null,c=d.floating||this._isFloating(this.currentItem),a=c?"left":"top",r=c?"width":"height",u=c?"pageX":"pageY",s=this.items.length-1;s>=0;s--)t.contains(this.containers[p].element[0],this.items[s].item[0])&&this.items[s].item[0]!==this.currentItem[0]&&(l=this.items[s].item.offset()[a],h=!1,e[u]-l>this.items[s][r]/2&&(h=!0),n>Math.abs(e[u]-l)&&(n=Math.abs(e[u]-l),o=this.items[s],this.direction=h?"up":"down"));if(!o&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",e,this._uiHash()),this.currentContainer.containerCache.over=1),void 0;o?this._rearrange(e,o,null,!0):this._rearrange(e,null,this.containers[p].element,!0),this._trigger("change",e,this._uiHash()),this.containers[p]._trigger("change",e,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",e,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return s.parents("body").length||t("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(s[0]),s[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!s[0].style.width||i.forceHelperSize)&&s.width(this.currentItem.width()),(!s[0].style.height||i.forceHelperSize)&&s.height(this.currentItem.height()),s},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,n=this.options;"parent"===n.containment&&(n.containment=this.helper[0].parentNode),("document"===n.containment||"window"===n.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===n.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===n.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(n.containment)||(e=t(n.containment)[0],i=t(n.containment).offset(),s="hidden"!==t(e).css("overflow"),this.containment=[i.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,i.left+(s?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(s?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,i){i||(i=this.position);var s="absolute"===e?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(n[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:n.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:n.scrollLeft())*s}},_generatePosition:function(e){var i,s,n=this.options,o=e.pageX,a=e.pageY,r="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(r[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(a=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(a=this.containment[3]+this.offset.click.top)),n.grid&&(i=this.originalPageY+Math.round((a-this.originalPageY)/n.grid[1])*n.grid[1],a=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-n.grid[1]:i+n.grid[1]:i,s=this.originalPageX+Math.round((o-this.originalPageX)/n.grid[0])*n.grid[0],o=this.containment?s-this.offset.click.left>=this.containment[0]&&s-this.offset.click.left<=this.containment[2]?s:s-this.offset.click.left>=this.containment[0]?s-n.grid[0]:s+n.grid[0]:s)),{top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:r.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:r.scrollLeft())}},_rearrange:function(t,e,i,s){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this.counter;this._delay(function(){n===this.counter&&this.refreshPositions(!s)})},_clear:function(t,e){function i(t,e,i){return function(s){i._trigger(t,s,e._uiHash(e))}}this.reverting=!1;var s,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(s in this._storedCSS)("auto"===this._storedCSS[s]||"static"===this._storedCSS[s])&&(this._storedCSS[s]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&n.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||n.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(n.push(function(t){this._trigger("remove",t,this._uiHash())}),n.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),s=this.containers.length-1;s>=0;s--)e||n.push(i("deactivate",this,this.containers[s])),this.containers[s].containerCache.over&&(n.push(i("out",this,this.containers[s])),this.containers[s].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!e){for(s=0;n.length>s;s++)n[s].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){t.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}})});function changeTheme(a){$("hr").css("border-top-color",a);switch(context.tplkey){case"tpl100":$(".field-title-td").css("background-color",a);break;case"tpl101":$(".field-title-wrap").css("background-color",a);$(".field-title-td").css("border-bottom-color",a);break;case"tpl102":$("#field-list").css("border-left-color",a);$("#baseinfo-header").css("background-color",a);$(".field-title-wrap,.field-title-td .editable").css("background-color",a);$(".field-title-wrap .title-icon-left").css("border-top-color",a);$(".field-title-wrap .title-icon-left").css("border-bottom-color",a);break;case"tpl103":$(".field-title-td").css("border-color",a);$(".field-value-td").css("border-color",a);$("#field-list").css("border-color",a);break;case"tpl104":$("#baseinfo-panel-right").css("background-color",a);$(".baseinfo-title .baseinfo-value,.field-title-td .editable").css("color",a);break;case"tpl105":$("#resume-left").css("background-color",a);$(".field-title-wrap .editable").css("color",a);$(".title-icon-inner").css("background-color",a);$(".field-title-td").css("border-bottom-color",a);break;case"tpl106":$("#baseinfo-panel-right").css("background-color",a);$("#baseinfo-panel-intent .baseinfo-label font").css("color",a);$("#leftinfo .skill-level,#skill-add-btn,#skill-hide-btn").css("background-color",a);$("#leftinfo .skill-level-word").css("color",a);$(".base-title,.skill-title,.hobby-title").css("color",a);$(".title-icon-inner").css("background-color",a);$(".title-icon-right").css("background-color",a);$(".field-title-wrap .editable").css("color",a);break;case"tpl107":$("#baseinfo span.baseinfo-item.baseinfo-title").css("color",a);$(".field-title-wrap,.field-title-td .editable").css("background-color",a);$(".title-icon-left").css("border-left-color",a);break;case"tpl108":$("#baseinfo-header").css("background-color",a);$(".field-title-wrap .editable").css("color",a);$(".title-icon-left").css("background-color",a);$(".title-icon-right").css("background-color",a);break;case"tpl109":$("#baseinfo").css("border-color",a);$(".field-title-wrap .editable").css("color",a);$(".title-icon-left").css("color",a);break;case"tpl110":$("#skill-level,#skill-add-btn,#skill-hide-btn").css("color",a);$("#resume-left").css("background-color",a);$("#baseinfo .skill-level").css("border-right-color",a);$("#baseinfo-panel-left .baseinfo-label").css("border-bottom-color",a);$(".field-title-wrap .editable").css("color",a);$(".title-icon-left").css("background-color",a);$(".title-icon-right").css("background-color",a);break;case"tpl111":$(".field-title-td").css("border-color",a);$(".field-title-wrap .editable").css("color",a);$(".field-value-td").css("border-color",a);$("#field-list").css("border-color",a);break;case"tpl112":$(".field-title-wrap .title-icon-right").css("background-color",a);break;case"tpl113":$("#baseinfo").css("border-top-color",a);$("#avater-wrapper").css("background-color",a);$(".field-title-wrap .editable").css("color",a);$(".title-icon-left").css("background-color",a);break;case"tpl114":$("#content,#baseinfo").css("border-color",a);$("#baseinfo .field-value-span").css("background-color",a);$(".title-icon-left,.field-title-td .editable").css("color",a);break;case"tpl115":$("#baseinfo").css("border-color",a);$(".field-title-wrap .editable").css("color",a);$(".title-icon-left").css("background-color",a);$(".title-icon-right").css("background-color",a);break;case"tpl116":$(".baseinfo-title .baseinfo-value,.field-title-td .editable").css("color",a);break;case"tpl117":$("#baseinfo-title .baseinfo-value").css("color",a);$("#skill-level,#skill-add-btn,#skill-hide-btn").css("color",a);$("#resume-left").css("border-left-color",a);$("#leftinfo .skill-level").css("background-color",a);$("#leftinfo .skill-level-word").css("color",a);$(".field-title-td .editable,.title-icon-inner").css("color",a);$("#baseinfo-panel-left .baseinfo-value").css("border-bottom-color",a);break;case"tpl118":$("#resume-left").css("border-left-color",a);$(".field-title-td .editable").css("background-color",a);break;case"tpl119":$("#baseinfo").css("border-top-color",a);$("#resume-left").css("border-right-color",a);$(".title-icon-left").css("background-color",a);$(".field-title-td .editable").css("background-color",a);$(".field-title-td").css("border-bottom-color",a);break;case"tpl120":$("#baseinfo").css("background-color",a);$(".field-title-td .editable").css("color",a);$(".field-title-td .editable").css("border-color",a);break;case"tpl121":$("#resume-left").css("border-left-color",a);$("#resume-left").css("border-right-color",a);$(".field-title-wrap").css("background-color",a);break;case"tpl122":$("#baseinfo").css("border-top-color",a);$(".title-icon-left").css("border-left-color",a);$(".field-title-td .editable").css("color",a);break;case"tpl123":$("#skill-level,#skill-add-btn,#skill-hide-btn").css("color",a);$("#baseinfo-panel-right").css("background-color",a);$("#leftinfo .skill-title,#leftinfo #skill-title").css("background-color",a);$("#leftinfo .skill-level").css("background-color",a);$("#leftinfo .skill-level-word").css("color",a);$(".title-icon-left").css("background-color",a);$(".field-title-td .editable").css("color",a);break;case"tpl124":$("#field-list").css("border-color",a);$(".field-title-td").css("border-color",a);$(".field-value-td").css("border-color",a);$(".baseinfo-row td").css("border-color",a);$(".field-title-td .editable").css("color",a);break;case"tpl125":$("#field-list").css("border-color",a);$(".field-title-td").css("border-color",a);$(".field-value-td").css("border-color",a);$(".baseinfo-row td").css("border-color",a);$(".field-title-td .editable").css("color",a);break;case"tpl126":$("#baseinfo span.baseinfo-item.baseinfo-title").css("color",a);$("#baseinfo-title").css("border-bottom-color",a);$(".field-title-td .editable").css("background-color",a);break;case"tpl127":$("#baseinfo span.baseinfo-item.baseinfo-title").css("color",a);$(".field-title-td .editable").css("color",a);$(".field-title-td .editable").css("border-color",a);break;case"tpl128":$("#baseinfo-title .editable").css("color",a);$("#baseinfo-title").css("border-bottom-color",a);$(".field-title-wrap").css("background-color",a);break;case"tpl129":$("#baseinfo-header").css("background-color",a);$(".title-icon-left").css("background-color",a);$(".title-icon-right").css("background-color",a);$(".field-title-td .editable").css("color",a);break;case"tpl130":$("#baseinfo-header").css("background-color",a);$("#baseinfo-header .baseinfo-title").css("color",a);$(".field-title-wrap").css("background-color",a).css("border-left-color",a);break;case"tpl131":$("#baseinfo span.baseinfo-item.baseinfo-title").css("color",a);$("#baseinfo span.baseinfo-item.baseinfo-title").css("border-bottom-color",a);$('#baseinfo[format="col"] span.baseinfo-fields span.baseinfo-row:nth-of-type(1) .baseinfo-value').css("color",a);$('#baseinfo[format="col"] span.baseinfo-fields span.baseinfo-row:nth-of-type(1)').css("border-bottom-color",a);$(".field-title-wrap").css("border-bottom-color",a);$(".field-title-wrap .editable").css("color",a);break;default:break}$("#content div.editable-three-column .skill-level").css("background-color",a);if(-1=="tpl100|tpl104|tpl107|tpl112|tpl116|tpl120|tpl123".indexOf(context.tplkey)){$('tbody[block="union-1"]').find(".editable-three-column").css("color",a);if(context.tplid>1000){$('tbody[key="work"]').find(".editable-three-column").css("color",a);$('tbody[key="project"]').find(".editable-three-column").css("color",a)}}if(a!=="#"+context.theme){if(-1==location.href.indexOf("muban/detail")&&context.user){context.savedToServer(false);context.integr.push("6")}}else{if(-1==location.href.indexOf("muban/detail"&&context.user)){context.savedToServer(true);context.integr.push("6")}}context.theme=a.substring(1)}if(context.tplid>1000){changeTheme("#"+context.theme)}$('#resume-theme-panel a[data-val="'+context.theme+'"]').addClass("resume-theme-this");$("body").on("mouseenter","#resume-theme",function(a){$(this).css("cursor","pointer");$("#resume-theme-panel").slideDown(50)}).on("mouseleave","#resume-theme",function(){$("#resume-theme-panel").slideUp(100)});$("body").on("click","#resume-theme-panel a",function(){var a=$(this).attr("data-val");changeTheme("#"+a);$("#resume-theme-panel a").removeClass("resume-theme-this");$(this).addClass("resume-theme-this")});if(!$("#content").find("#avater-img").attr("src")){$("#content").find("#avater-img").attr("src",context.res+"images/avater.jpg")}var _contentHeight=$("#content").height();_contentHeight=_contentHeight>1345?_contentHeight:1345;$("#resume-left").css("height",_contentHeight+"px");if("tpl114"==context.tplkey){$("#content").css("border-color","#"+context.theme)};var toolbar=new FishEditor({visible:false,cssPath:context.res+"lib/fish/fishEditor.css"});(function(){toolbar.click(function(a){toolbar.handler.btnClickHandler(a,toolbar);toolbar.handler.panelClickHandler(a,toolbar)});$("body").on("mouseenter","#common-toolbar",function(){$(this).css("z-index",999999999)}).on("mouseleave","#common-toolbar",function(){$(this).css("z-index",1)})})();(function(){toolbar.edit($("#resume-paper .editable:not(.baseinfo-value),#leftinfo .editable").toArray());$("#content").on("focus",".editable",function(a){$(this).addClass("editable-focus");$(this).removeClass("editable-hover")});$("#content").on("blur",".editable",function(a){$(this).removeClass("editable-focus")});$("#content").on("mouseenter","#baseinfo, #leftinfo",function(a){$(this).find(".editable").addClass("editable-hover")});$("#content").on("mouseleave","#baseinfo, #leftinfo",function(a){$(this).find(".editable").removeClass("editable-hover")});$("#content").on("mouseenter","tbody",function(a){$(this).find(".field-title-wrap .editable").addClass("editable-hover")});$("#content").on("mouseleave","tbody",function(a){$(this).find(".field-title-wrap .editable").removeClass("editable-hover")});$("#content").on("mouseenter",'tbody:not("#baseinfo") .field-value-span',function(a){$(this).find(".editable").addClass("editable-hover");$(this).css("background-color","#f8f8f8")});$("#content").on("mouseleave",'tbody:not("#baseinfo") .field-value-span',function(a){$(this).find(".editable").removeClass("editable-hover");$(this).css("background-color","")});$(".field-title-td").each(function(a){if($(this).parents("#baseinfo,#leftinfo").size()<1){$(this).append('<div class="block-tool-box"><a href="javascript:;" class="add-del-btn block-drag-btn"><i class="jlbfont icon-move" style="font-size:15px"></i></a><a href="javascript:;" class="add-del-btn block-del-btn"><i class="jlbfont icon-remove" style="font-size:12px;"></i>删除模块</a><a href="javascript:;" class="add-del-btn block-add-btn"><i class="jlbfont icon-upload-demo" style="font-size:12px;font-weight:bold"></i>添加模块</a></div>')}});$(".field-value-span").each(function(a){if($(this).parents("#baseinfo,#leftinfo").size()<1){$(this).append('<div class="field-tool-box"><a href="javascript:;" class="add-del-btn field-drag-btn"><i class="jlbfont icon-move" style="font-size:15px"></i></a><a href="javascript:;" class="add-del-btn field-del-btn"><i class="jlbfont icon-remove" style="font-size:12px;"></i>删除本条</a><a href="javascript:;" class="add-del-btn field-add-btn"><i class="jlbfont icon-upload-demo" style="font-size:12px;font-weight:bold"></i>新增一条</a></div>');$(this).find(".field-tool-box").append('<a href="javascript:;" class="add-del-btn desc-del-btn"><i class="jlbfont icon-delete1" style="font-size:14px"></i></a>');$(this).find(".field-tool-box").append('<a href="javascript:;" class="add-del-btn desc-add-btn"><i class="jlbfont icon-preview" style="font-size:16px"></i></a>')}});$("#content").on("mouseenter",".block-drag-btn,.field-drag-btn,.desc-del-btn,.desc-add-btn",function(){var a=$(this).hasClass("desc-del-btn")?"隐藏描述":($(this).hasClass("desc-add-btn")?"显示描述":"拖动排序");toolBoxTips=layer.tips(a,this,{tips:2,tipsMore:true,success:function(b,c){b.css("top",(b.offset().top-10)+"px")}})}).on("mouseleave",".block-drag-btn,.field-drag-btn,.desc-del-btn,.desc-add-btn",function(){layer.close(toolBoxTips)});$("#content").on("keypress",".baseinfo-label, .baseinfo-value, .field-title",function(a){if(a.keyCode==13){a.preventDefault()}});$(function(){document.execCommand("AutoUrlDetect",false,false)});$("#content").on("paste",".editable",function(a){a=a||event;a.preventDefault();var b;if((a.originalEvent||a).clipboardData){b=(a.originalEvent||a).clipboardData.getData("text/plain");document.execCommand("insertHTML",false,b)}else{b=window.clipboardData.getData("Text");document.execCommand("paste",false,b)}})})();(function(){var e=$("#avater-img").attr("width");var f=$("#avater-img").attr("height");var a=($("#avater-wrapper").width()-$("#avater-img").width())/2;var d=$('<button type="button" class="layui-btn" id="upload-btn"><i class="layui-icon">&#xe67c;</i>上传照片</button>').css("position","absolute").css("display","none").css("width",e+"px").css("left",a+"px").css("z-index",1).appendTo($("#avater-wrapper"));var c=$('<span id="upload-ldg"></span>').css("position","absolute").css("display","none").css("left","0px").css("top","0px").css("width",e+"px").css("height",f+"px").css("background-image","url("+context.res+"lib/layui/css/modules/layer/default/loading-0.gif)").css("background-color","rgba(0,0,0,0.5)").css("background-position","center center").css("background-repeat","no-repeat").appendTo($("#avater-wrapper"));$("#avater-wrapper").mouseover(function(g){d.css("display","block");b.css("display","block")});$("#avater-wrapper").mouseleave(function(g){d.css("display","none");b.css("display","none")});layui.use("upload",function(){var g=1024;if(context.vip){g=100*1024}var h=layui.upload.render({elem:"#upload-btn",url:context.host+"resume/upload?resumeId="+context.resume+"&imgRatio="+(e==f?1:1.2),before:function(j){if(!context.user){layer.msg("请先登录");h.config.elem.next()[0].value="";return false}if("editor"==context.page){layer.msg("请先完善简历");h.config.elem.next()[0].value="";return false}$("#upload-ldg").css("display","block")},done:function(j){$("#upload-ldg").css("display","none");if(j&&j.retCode==0){$("#avater-img").attr("src",j.retText+"?v="+Math.round((new Date()).getTime()/1000));context.savedToServer(false)}else{if(j&&j.retCode!=0){layer.msg(retText,{icon:2,anim:6});h.config.elem.next()[0].value=""}else{layer.msg("照片上传失败，请稍后再试",{icon:2,anim:6});h.config.elem.next()[0].value=""}}},error:function(){$("#upload-ldg").css("display","none");layer.msg("照片上传错误，请稍后再试",{icon:2,anim:6});h.config.elem.next()[0].value=""},size:g,field:"file",accept:"images",exts:"jpg|png|jpeg"})});var b=$('<button type="button" class="layui-btn" id="photo-close-btn" data-trace="editor-operate-hidephoto">隐藏</button>').css("position","absolute").css("display","none").css("width","40px").css("font-size","12px").css("height","20px").css("line-height","20px").css("top","0px").css("right","0px").css("padding","0px").appendTo($("#avater-wrapper"));if(context.tplkey=="tpl106"){b.css("top","30px");b.css("right","65px")}if(context.tplkey=="tpl119"){b.css("top","35px");c.css("top","35px")}if(context.tplkey=="tpl113"){b.css("right","20px");d.css("left","20px");c.css("left","20px")}if(context.tplkey=="tpl131"){d.css("left","10px");c.css("left","10px")}if(-1!="tpl113|tpl119|tpl117|tpl110|tpl118".indexOf(context.tplkey)){c.css("border-radius","100px")}$("#avater-wrapper").on("click","#photo-close-btn",function(){var h=$("#avater-wrapper");var j=h.attr("data-show");if("hide"!==j){h.attr("data-show","hide");if(-1!="tpl124|tpl125".indexOf(context.tplkey)){h=$("#baseinfo-table");h.attr("data-show","hide")}var g=$("#baseinfo-panel-left");g.attr("data-width","100%");layer.msg("可在操作历史或编辑基本信息时恢复显示照片",{time:0,btn:["知道了"]});context.historyBak({parent:g,child:h,action:"photo",text:"隐藏照片"})}context.savedToServer(false)})})();function showAndHidePageLine(){$("#resume-left").css("height","1345px");var a=$("#content").height();if("tpl104"==context.tplkey){a=a+50}if("tpl114"==context.tplkey){a=a+20}a=a>1345?a:1345;if(a>1345&&a<=2690){if($("#page-line-one").size()<1){$('<span id="page-line-one"><span id="page-tips-one">— 超出1页 —</span><span class="page-one-btn" data-trace="editor-operate-pageone">自动缩成1页</span><a href="'+context.host+'article/detail/43299" target="_blank" data-trace="editor-operate-pagehow" style="position:absolute;top:-30px;right:-80px;font-size:13px;color:#888;"><i class="jlbfont icon-help" style="font-size:14px;font-weight:bold"></i> 如何分页</a></span>').appendTo($("#container"));layui.use(["layer"],function(){var b=layui.layer})}if($("#page-line-two").size()>0){$("#page-line-two").remove()}}else{if(a>2690){if($("#page-line-one").size()<1){$('<span id="page-line-one"><span id="page-tips-one">— 超出1页 —</span><span class="page-one-btn" data-trace="editor-operate-pageone">自动缩成1页</span><a href="'+context.host+'article/detail/43299" target="_blank" style="position:absolute;top:-30px;right:-80px;font-size:13px;color:#888;"><i class="jlbfont icon-help" style="font-size:14px;font-weight:bold"></i> 如何分页</a></span>').appendTo($("#container"));layui.use(["layer"],function(){var b=layui.layer})}if($("#page-line-two").size()<1){$('<span id="page-line-two"><span id="page-tips-two">— 超出2页 —</span><span class="page-two-btn" data-trace="editor-operate-pageone">自动缩成2页</span><a href="'+context.host+'article/detail/43299" target="_blank" style="position:absolute;top:-30px;right:-80px;font-size:13px;color:#888;"><i class="jlbfont icon-help" style="font-size:14px;font-weight:bold"></i> 如何分页</a></span>').appendTo($("#container"));layui.use(["layer"],function(){var b=layui.layer})}}else{if(a<=1345){if($("#page-line-one").size()>0){$("#page-line-one").remove()}if($("#page-line-two").size()>0){$("#page-line-two").remove()}}}}$("#resume-left").css("height",a+"px")}$(function(){if("editor"!=context.page){showAndHidePageLine()}});$("body").on("mouseenter","#page-line-one a,#page-line-two a",function(){pagingTips=layer.tips('<span style="color:#888">若不想将简历缩成1页，在分页线上下按回车留空白对PDF进行分页</span>',$(this),{tips:[1,"#fffadd"],tipsMore:true,time:0})}).on("mouseleave","#page-line-one a,#page-line-two a",function(){layer.close(pagingTips)});$("#content").on("keydown",".editable",function(b){var c=b||window.event;var a=c.keyCode;if((a>=112&&a<=123)||(a>=37&&a<=40)||(a>=16&&a<=20)||a==144||a==36||a==35||a==9||a==91||a==83){console.log("keycode="+a)}else{if(!$(this).data("data-his")){$(this).data("data-his",$(this).html())}}});$("#content").on("keyup",".editable",function(b){var c=b||window.event;var a=c.keyCode;if((a>=112&&a<=123)||(a>=37&&a<=40)||(a>=16&&a<=20)||a==144||a==36||a==35||a==9||a==91||a==83){console.log("keycode="+a)}else{if(!context.user){$("#operate-login").click()}if($(this).data("data-his")!=$(this).html()&&!$(this).data("data-hised")){$(this).data("data-hised",true);context.historyBak({parent:$(this),child:$(this).data("data-his"),action:"html",text:"修改内容"});context.savedToServer(false);if($(this).is("span")){context.integr.push("1")}else{context.integr.push("2")}}showAndHidePageLine()}});$("#content").on("click",".block-add-btn",function(){var a='添加模块<font style="color:#bbb;font-size:12px;">&nbsp;&nbsp;&nbsp;标题和内容可自定义修改</font>';var b=$(this);layer.open({type:1,title:[a,"text-align:center;background-color:#fff;"],content:"",area:["680px","100%"],offset:["0px","0px"],anim:-1,isOutAnim:false,scrollbar:false,move:false,resize:false,btn:[],success:function(h,e){h.css("left","-50%").css("border-radius","0px");h.find(".layui-layer-content").css("padding-top","5px");h.animate({left:0},500);var g=$.data(document.body,"_block_list_data_");if(!g){h.find(".layui-layer-content").css("background","url("+context.res+"lib/layui/css/modules/layer/default/loading-0.gif) center center no-repeat");$.post(context.host+"block/list",{},function(j){j=$.parseJSON(j);f(j);$.data(document.body,"_block_list_data_",j);h.find(".layui-layer-content").css("background","")})}else{f(g)}var d=b.parents("tbody").eq(0);var c=d.clone();function f(l){var o="";var n="";var m=$("tbody");if(-1!="tpl103|tpl111|tpl124|tpl125".indexOf(context.tplkey)){n='<tr><td class="field-title-td"><div class="field-title-wrap"><div class="editable editable-hover" contenteditable="true">{_block_title_con_}</div></div></td></tr>'}else{if(m&&m.size()>1){var j=m.eq(1).find("tr").eq(0).clone();j.find(".field-title-wrap .editable").text("{_block_title_con_}");n=j.prop("outerHTML")}}for(i in l){var k='<div class="block-item-back"><div class="block-item-addbtn" block="'+l[i].block_type+'" key="'+l[i].block_key+'" name="'+l[i].block_name+'" data-trace="editor-block-add'+l[i].block_key+'"><i class="jlbfont icon-create" style="margin-right:5px;font-size:12px;"></i>添加此模块</div></div>';o+=('<div class="block-item" block="'+l[i].block_type+'" key="'+l[i].block_key+'"><table style="width:100%;">'+n.replace("{_block_title_con_}",l[i].block_name)+'<tr><td class="field-value-td">'+l[i].block_content+"</td></tr></table>"+k+"</div>")}h.find(".layui-layer-content").html(o);h.find(".editable-three-column .skill-level").css("background-color","#"+context.theme);if(-1!="tpl118|tpl119|tpl126|tpl127|tpl120".indexOf(context.tplkey)){layer.style(e,{width:"810px"});h.find(".block-item").css("margin-left","140px")}if(-1!="tpl108|tpl109|tpl110|tpl113|tpl114|tpl115|tpl129".indexOf(context.tplkey)){h.find(".title-icon-right").css("width","560px")}if(-1!="tpl102".indexOf(context.tplkey)){h.find(".title-icon-right").css("width","515px")}if(-1!="tpl112|tpl117".indexOf(context.tplkey)){h.find(".title-icon-right").css("width","600px")}h.find(".block-item").off("mouseenter").on("mouseenter",function(){$(this).find(".block-item-back").css("width",$(this).width()+20+"px").css("height",$(this).height()+20+"px").show()}).off("mouseleave").on("mouseleave",function(){$(this).find(".block-item-back").hide()});h.find(".block-item-addbtn").off("click").on("click",function(){h.animate({left:-1*h.width()},300);setTimeout(function(){layer.close(e)},300);var r=$(this).parent().prev().find(".field-value-span");var p=c.find(".field-value-span").eq(0).find(".field-tool-box");r.append(p);c.attr("block",$(this).attr("block"));c.attr("key",$(this).attr("key"));c.find(".field-value-td").empty().append(r);c.find(".editable-right, .editable-center, .editable-lcenter, .editable-rcenter").resizable(resizableOption);d.after(c);c.css("background","#eee").hide(0).fadeIn(500,function(){$(this).removeAttr("style")});var q=c.find(".editable");q.eq(0).html($(this).attr("name"));if(("en"==context.cvlang)&&("three-2"==$(this).attr("block"))){c.find(".skill-level-word").text("Good")}toolbar.edit(q.toArray());c.sortable({axis:"y",items:".field-value-span",handle:".field-drag-btn",tolerance:"pointer",placeholder:"field-drag-holder",start:function(s,t){$(".field-drag-holder").text("拖动到这里");var u=t.helper.height();$(".field-drag-holder").css("height",u+"px").css("line-height",u+"px")},update:function(s,t){context.savedToServer(false)}});renderDateRangeWidget(c.find("div.editable-three-column.editable-left:not(.skilleditable)"));$("body").animate({scrollTop:$(document).scrollTop()+d.height()},500);$(document.documentElement).animate({scrollTop:$(document).scrollTop()+d.height()},500);context.savedToServer(false);showAndHidePageLine();context.integr.push("5")})}},cancel:function(c,d){d.animate({left:-1*d.width()},300);setTimeout(function(){layer.close(c)},300);return false}});context.trace("editor-block-blkadd")});$("#content").on("click",".field-add-btn",function(){var b=$(this).parent().parent();var a=b.clone();b.after(a);toolbar.edit(a.find(".editable").toArray());a.find(".ui-resizable-handle").remove();a.find(".editable-right, .editable-center, .editable-lcenter, .editable-rcenter").resizable(resizableOption);renderDateRangeWidget(a.find("div.editable-three-column.editable-left:not(.skilleditable)").removeAttr("lay-key"));a.hide().css("background","#eee").fadeIn(500,function(){$(this).removeAttr("style")});var c=$(this).attr("data-scroll");if(!c){$("body").animate({scrollTop:$(document).scrollTop()+b.height()},500);$(document.documentElement).animate({scrollTop:$(document).scrollTop()+b.height()},500);context.savedToServer(false);showAndHidePageLine();context.integr.push("5");context.trace("editor-content-conadd")}});$("#content").on("click","tbody .block-del-btn",function(){var a=$(this);layer.confirm("确定删除此模块吗？(可在操作历史中恢复)",{title:"提示"},function(b,d){var c=a.parents("tbody").eq(0);if(c.prev().size()<1){context.historyBak({parent:c.next(),child:c,action:"before",text:"删除模块"})}else{context.historyBak({parent:c.prev(),child:c,action:"after",text:"删除模块"})}c.wrap("<span></span>").parent().slideUp("normal",function(){$(this).remove();context.savedToServer(false);showAndHidePageLine()});context.integr.push("5");layer.close(b)});context.trace("editor-block-blkdel")});$("#content").on("mouseenter","tbody .block-tool-box",function(){$(this).parents("tbody").eq(0).css("background-color","#f8f8f8").css("box-shadow","0px 0px 2px #bbb")}).on("mouseleave","tbody .block-tool-box",function(){$(this).parents("tbody").eq(0).css("background-color","").css("box-shadow","")});$("#content").on("click","tbody .field-del-btn",function(){var a=$(this);layer.confirm("确定删除本条内容吗？(可在操作历史中恢复)",{title:"提示"},function(c,e){var f=a.parent().parent().parent();if(f.find(".field-value-span").size()>1){var b=a.parent().parent();if(b.prev().size()<1){context.historyBak({parent:b.next(),child:b,action:"before",text:"删除内容"})}else{context.historyBak({parent:b.prev(),child:b,action:"after",text:"删除内容"})}b.wrap("<span></span>").parent().slideUp("normal",function(){$(this).remove();context.savedToServer(false);showAndHidePageLine()})}else{var d=a.parents("#field-list tbody").eq(0);if(d.prev().size()<1){context.historyBak({parent:d.next(),child:d,action:"before",text:"删除模块"})}else{context.historyBak({parent:d.prev(),child:d,action:"after",text:"删除模块"})}d.wrap("<span></span>").parent().slideUp("normal",function(){$(this).remove();context.savedToServer(false);showAndHidePageLine()})}context.integr.push("5");layer.close(c)});context.trace("editor-content-condel")});$("#content").on("click","tbody .desc-del-btn",function(){var a=$(this).parent().parent();context.historyBak({parent:a,child:$(this),action:"describe",text:"隐藏描述"});a.attr("data-desc","hide");context.savedToServer(false);showAndHidePageLine();context.integr.push("5");context.trace("editor-content-conhide")});$("#content").on("click","tbody .desc-add-btn",function(){var a=$(this).parent().parent();a.removeAttr("data-desc");context.savedToServer(false);showAndHidePageLine();context.integr.push("5");context.trace("editor-content-conshow")});$("#field-list").sortable({axis:"y",items:'tbody:not("#baseinfo")',handle:".field-title-td .block-drag-btn",tolerance:"pointer",placeholder:"block-drag-holder",start:function(a,b){$(".block-drag-holder").text("拖动到这里");var c=b.helper.height();$(".block-drag-holder").css("height",c+"px").css("line-height",c+"px")},update:function(a,b){context.savedToServer(false);context.trace("editor-block-blkdrag")}});$("#field-list>tbody").sortable({axis:"y",items:".field-value-span",handle:".field-drag-btn",tolerance:"pointer",placeholder:"field-drag-holder",start:function(a,b){$(".field-drag-holder").text("拖动到这里");var c=b.helper.height();$(".field-drag-holder").css("height",c+"px").css("line-height",c+"px")},update:function(a,b){context.savedToServer(false);context.trace("editor-content-condrag")}});var resizableOption={handles:"w",maxWidth:400,minWidth:100,prevInitWidth:0,start:function(a,b){this.prevInitWidth=$(this).prev().width()},resize:function(a,b){$(this).prev().width(this.prevInitWidth+(b.originalSize.width-b.size.width));$(this).css("left","")},stop:function(a,b){context.savedToServer(false);context.trace("editor-content-conresize")}};$(".editable-right, .editable-center, .editable-lcenter, .editable-rcenter").each(function(){if(-1==$(this).html().indexOf("div")){var a=$(this).text().replace(/(^\s*)|(\s*$)/g,"");a=!a?"<br>":a;$(this).html("<div>"+a+"</div>")}$(this).resizable(resizableOption)});function renderDateRangeWidget(a){layui.use("laydate",function(){var b=layui.laydate;a.each(function(){var c=this;b.render({elem:c,type:"month",format:"yyyy.MM",showBottom:true,btns:[],range:true,ready:function(d){$(".editable-options").remove();$("#"+d.elemID).off("click").on("click",".laydate-main-list-1 .laydate-month-list li",function(){$("#"+d.elemID).remove()})},change:function(e,f,d){$(c).text(e);context.savedToServer(false)}})})})}renderDateRangeWidget($("div.editable-three-column.editable-left:not(.skilleditable)"));$("#content").on("click",'tbody[block="four-1"] .editable-right',function(d){if("en"==context.cvlang){return false}if($(this).next("ul").size()>0){$(this).next("ul").remove();return false}$(this).addClass("editable-select");$(".editable-options").remove();var c=$('<ul class="editable-options"></ul>');c.css("position","absolute").css("padding","0px").css("margin","0px").css("list-style","none").css("left",$(this).position().left+9+"px").css("left","calc(1% + "+$(this).position().left+"px").css("top",$(this).position().top+$(this).height()+15+"px").css("width",$(this).width()+"px").css("height","156px").css("background","#fff").css("border","1px #ccc solid").css("border-radius","2px").css("box-shadow","0px 1px 6px #bbb").css("font-size","15px").css("font-weight","300").css("color","#666").css("z-index","1000");var b=$('<li style="padding:5px 10px;"></li>');c.append(b.clone().css("border-bottom","1px #eee solid").html("➢&nbsp;一周内到岗"));c.append(b.clone().css("border-bottom","1px #eee solid").html("➢&nbsp;一个月内到岗"));c.append(b.clone().css("border-bottom","1px #eee solid").html("➢&nbsp;三个月内到岗"));c.append(b.clone().css("border-bottom","1px #eee solid").html("➢&nbsp;到岗时间面议"));c.append(b.clone().css("text-align","center").css("font-size","13px").css("color","#aaa").html("取消"));$(this).after(c);var a=$(this);c.on("click","li",function(){if("取消"!=$(this).text()&&a.text()!=$(this).text()){a.html($(this).html()).focus();context.savedToServer(false);context.integr.push("2")}c.remove();c.off("mouseover");c.off("mouseout");c.off("click")});c.on("mouseover","li",function(){$(this).css("background","#eef0fc").css("cursor","pointer")});c.on("mouseout","li",function(){$(this).css("background","")})});(function(){if("tpl106"==context.tplkey||"tpl110"==context.tplkey||"tpl117"==context.tplkey||"tpl123"==context.tplkey){$("#content").on("click","span.skill-level-bg",function(b){var a=b.pageX-$(this).offset().left;a=a>180?180:a;$(this).find(".skill-level").css("width",a+"px");if(a<60){$(this).next(".skill-level-word").text("了解")}else{if(a>140){$(this).next(".skill-level-word").text("精通")}else{$(this).next(".skill-level-word").text("熟练")}}context.savedToServer(false)});$("#baseinfo-panel-skill").on("click",".skill-del-btn",function(a){$(this).parent().remove();context.savedToServer(false)});$("#baseinfo-panel-skill").on("click","#skill-add-btn",function(a){$(this).before($(this).prev().clone());context.savedToServer(false)});$("#baseinfo-panel-skill").on("mouseenter",function(){$(this).find("#skill-add-btn,#skill-hide-btn,.skill-del-btn").css("visibility","visible")}).on("mouseleave",function(){$(this).find("#skill-add-btn,#skill-hide-btn,.skill-del-btn").css("visibility","hidden")});if($("#skill-add-btn").size()<1){$("#baseinfo-panel-skill").append('<div id="skill-add-btn">新增一条</div>')}if($("#skill-hide-btn").size()<1){$("#baseinfo-panel-skill").append('<div id="skill-hide-btn">隐藏面板</div>')}$("#baseinfo-panel-skill").on("click","#skill-hide-btn",function(a){if($("#baseinfo-panel-skill").attr("data-show")=="hide"){$("#baseinfo-panel-skill").attr("data-show","show");$(this).html("隐藏面板")}else{$("#baseinfo-panel-skill").attr("data-show","hide");$(this).html("显示面板")}context.savedToServer(false)})}$("#content div.skill-level").css("background-color","#"+context.theme);$("#content").on("click","div.skill-level-bg",function(c){var a=c.pageX-$(this).offset().left;var d=$(this).width();var b=Math.round((a/d)*100);$(this).find(".skill-level").css("width",b+"%");if(b<25){$(this).parent().next().find(".skill-level-word").text(context.skilltitle[context.cvlang].average)}else{if(b<50){$(this).parent().next().find(".skill-level-word").text(context.skilltitle[context.cvlang].good)}else{if(b<75){$(this).parent().next().find(".skill-level-word").text(context.skilltitle[context.cvlang].advanced)}else{$(this).parent().next().find(".skill-level-word").text(context.skilltitle[context.cvlang].expert)}}}context.savedToServer(false)})})();$("#operate-save").click(function(E){if(!context.user){$("#header .jlb-login-link").click();return false}if(context.hasSavedToServer){return false}var b=$("#resume-paper").clone();b.find("#avater-wrapper").find("#upload-btn").remove();b.find("#avater-wrapper").find("#upload-ldg").remove();b.find("#avater-wrapper").find("#photo-close-btn").remove();b.find("#avater-wrapper").find(".layui-upload-file").remove();b.find(".editable-options").remove();b.find(".block-tool-box, .field-tool-box").remove();b.find(".editable").removeAttr("contenteditable").removeAttr("lay-key").removeClass("editable-hover").removeClass("editable-focus").removeClass("ui-resizable");b.find("#field-list,#field-list tbody").removeAttr("class");b.find("#field-list tbody").removeAttr("style");b.find("#field-list .field-value-span").css("background-color","");b.find(".ui-resizable-handle").remove();b.find('tbody[display="hide"]').remove();var a=$('input[name="resumeNo"]').val();var c=$('input[name="resumeName"]').val();var o=$('input[name="pdfExport"]').val();var r=$('input[name="wordExport"]').val();var I=$('#baseinfo span[key="name"]').text();var u=$('#baseinfo span[key="sex"]').text();var v=$('#baseinfo span[key="age"]').attr("birthday");var x=$('#baseinfo span[key="age"]').text();var f=$('#baseinfo span[key="mobile"]').text();var A=$('#baseinfo span[key="email"]').text();var s=$('#baseinfo span[key="job"]').text();var D=$('#baseinfo span[key="years"]').text();var B=$('#baseinfo span[key="major"]').text();var y=$('#baseinfo span[key="school"]').text();var t=$('#baseinfo span[key="edu"]').text();var e=$('#baseinfo span[key="nation"]').text();var C=$('#baseinfo span[key="from"]').attr("val");var H=$('#baseinfo span[key="from"]').attr("shi");var l=$('#baseinfo span[key="address"]').attr("val");var w=$('#baseinfo span[key="address"]').attr("sheng");var g=$('#baseinfo span[key="marital"]').text();var q=$('#baseinfo span[key="polity"]').text();var G=$('#baseinfo span[key="intro"]').text()||$("#baseinfo").attr("intro");var z=b.html();var d=$("#field-list").attr("data-fontsize")||"15px";var k=$("#field-list").attr("data-linespace")||"1.6em";var p=$("#field-list").attr("data-blockspace")||"20px";var h=[];for(var F=0;F<context.integr.length;F++){if(h.indexOf(context.integr[F])==-1){h.push(context.integr[F])}}h=h.sort().join("-");var n=Math.ceil($("#content").height());var m=Math.ceil($("#content").height()/1345);var j=layer.msg("正在保存...",{icon:16,shade:0.7,time:0});$.ajaxSetup({contentType:"application/x-www-form-urlencoded; charset=utf-8"});$.post(context.host+"resume/save",{resumeId:context.resume,resumeNo:a,resumeNm:c,pdfExp:o,wordExp:r,integr:h,height:n,pageNum:m,resume:z,tplId:context.tplid,tplKey:context.tplkey,theme:context.theme,name:I,birthday:v||"",age:x,sex:u,mobile:f,email:A,job:s,years:D,major:B,school:y,edu:t,nation:e,from:C||"",shi:H||"",address:l||"",sheng:w||"",marital:g,polity:q,intro:G,page:context.page,cvlang:context.cvlang,fontSize:d,lineSpace:k,blockSpace:p,advisor_order_id:context.advisor_order_id},function(J){J=$.parseJSON(J);if(1==J.retCode){context.pv("/resume/create");context.savedToServerFirst=true;layer.msg("保存成功");layer.close(K);var K=layer.msg("正在刷新简历...",{icon:16,shade:0.7,time:0});location.href=context.host+"user/resume/"+J.retText}else{if(0==J.retCode){layer.msg("保存成功");layer.close(K);context.savedToServer(true);$('input[name="pdfExport"]').val("");$('input[name="wordExport"]').val("");context.status="trunk"}else{layer.msg(J.retText);context.err("userId="+context.user+"tplId="+context.tplid+"&resumeId="+context.resume+"&name="+I+"&retText="+J.retText)}}b=null})});$(document).on("keydown",function(a){if(a.keyCode==83&&(a.metaKey||a.ctrlKey)){a.preventDefault();$("#operate-save").click()}});$("#operate-save").hover(function(){if(context.hasSavedToServer&&context.user){resumeSaveTips=layer.tips("简历已保存",this,{tips:[3,"#FFB800"],time:0,tipsMore:true})}},function(){if(context.hasSavedToServer&&context.user){layer.close(resumeSaveTips)}});$("#baseinfo").on("click",".baseinfo-value",function(){var c="";var a="";var d=$("#baseinfo").attr("format")||"row";d="en"==context.cvlang?"row":d;var b=layer.open({type:1,title:"基本信息",content:$("#baseinfo-panel-"+context.cvlang),btn:["保存","取消"],shadeClose:true,area:"684px",success:function(v,m){v.addClass("layui-form");v.find(".layui-layer-btn0").attr("lay-filter","formVerify").attr("lay-submit","");v.find(".layui-layer-content").css("overflow","visible");var B=$('#baseinfo span[key="name"]').text();var r=$('#baseinfo span[key="sex"]').text();var s=$('#baseinfo span[key="age"]').attr("birthday");var u=$('#baseinfo span[key="age"]').text();var y=$('#baseinfo span[key="years"]').text();var q=$('#baseinfo span[key="edu"]').text();var h=$('#baseinfo span[key="mobile"]').text();var w=$('#baseinfo span[key="email"]').text();var p=$('#baseinfo span[key="job"]').text();var j=$('#baseinfo span[key="marital"]').text();var l=$('#baseinfo span[key="polity"]').text();var g=$('#baseinfo span[key="nation"]').text();var x=$('#baseinfo span[key="from"]').attr("val");var A=$('#baseinfo span[key="from"]').attr("shi");var k=$('#baseinfo span[key="address"]').attr("val");var t=$('#baseinfo span[key="address"]').attr("sheng");var z=$('#baseinfo span[key="intro"]').text()||$("#baseinfo").attr("intro");var f=$("#avater-wrapper").attr("data-show")||"show";var e=$('#baseinfo span[key^="custom"]');var n="";e.each(function(C){var E=$(this).text();var o=$(this).prev().text().replace("：","");if("col"==d){o=o.replace(/　/g,"")}else{var D=$(this).text().split("：");if(D.length>1){E=$(this).text().split("：")[1];o=$(this).text().split("：")[0]}else{E=$(this).text().split("：")[0];o=""}}n+='<div class="layui-inline"><label class="layui-form-label custom-label" contenteditable="true" placeholder="自定义标题">'+o+'</label><div class="layui-input-inline"><input type="text" name="custom'+(C+1)+'" value="'+E+'" lay-verify="limit" autocomplete="off" placeholder="自定义内容" class="layui-input"></div><span class="layui-badge custom-del">x</span></div>'});v.find(".baseinfo-custom").html(n);if(A){v.find('select[name="shi"]').html('<option value="'+A+'">'+A+"</option>")}if(k){v.find('select[name="address"]').html('<option value="'+k+'">'+k+"</option>")}if(s<"1970.01"){s="1990.01"}layui.use(["form"],function(){var o='<option value="" selected>省</option>';for(var D in context.region.prov){var C=context.region.prov[D];o+='<option value="'+C+'">'+C+"</option>"}v.find('select[name="from"],select[name="sheng"]').html(o);var E=layui.form;v.find('input[name="name"]').val(B);v.find('select[name="sex"] option[value="'+r+'"]').attr("selected",true);v.find('input[name="birthday"]').val(s);v.find('input[name="birthday"]').attr("age",u);v.find('select[name="years"]').val(y);v.find('input[name="mobile"]').val(h);v.find('input[name="email"]').val(w);v.find('input[name="job"]').val(p);v.find('select[name="edu"]').val(q);v.find('select[name="marital"]').val(j);v.find('select[name="polity"]').val(l);v.find('select[name="nation"]').val(g);v.find('select[name="from"]').val(x);v.find('select[name="shi"]').val(A);v.find('select[name="address"]').val(k);v.find('select[name="sheng"]').val(t);v.find('select[name="photo"]').val(f);v.find('input[name="photo"][value="'+f+'"]').attr("checked",true);v.find('input[name="format"][value="'+d+'"]').attr("checked",true);if(-1!="tpl110|tpl117|tpl123|tpl124|tpl125".indexOf(context.tplkey)){v.find('input[name="format"][value="col"]').attr("checked",true);v.find('input[name="format"][value="row"]').attr("disabled",true)}if("en"==context.cvlang){v.find('input[name="format"][value="row"]').attr("checked",true);v.find('input[name="format"][value="col"]').attr("disabled",true)}E.render("radio","baseinfo");E.render("select","baseinfo");if(-1!="tpl110|tpl117|tpl123|tpl124|tpl125".indexOf(context.tplkey)){v.find('input[name="format"][value="row"]').next().on("click",function(){layer.msg("表格和双栏简历不支持简洁排版")})}if("en"==context.cvlang){v.find('input[name="format"][value="col"]').next().on("click",function(){layer.msg("英文简历不支持标准排版")})}setTimeout(function(){v.find('input[placeholder="一句话介绍自己(可不填)"]').removeAttr("readonly").removeClass("layui-unselect");v.find('input[placeholder="一句话介绍自己(可不填)"]').val(z);v.find('select[name="from"],select[name="shi"],select[name="sheng"],select[name="address"]').parent().css("width","95px")},100);E.verify({limit:function(F){if(F&&F.length>20){return"字数不能超过20"}},email:function(F){F=(F||"").replace(/(^\s*)|(\s*$)/g,"");if((F&&!(/^[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]*)*@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(F)))||F.length>100){return"邮箱格式不正确"}}});E.on("radio(format)",function(F){if("col"==F.value){v.find("form.layui-form div.layui-form-item:last-child").hide(0);d="col"}else{v.find("form.layui-form div.layui-form-item:last-child").show(0);d="row"}});if("col"==d){v.find("form.layui-form div.layui-form-item:last-child").hide(0)}else{v.find("form.layui-form div.layui-form-item:last-child").show(0)}E.on("select(from)",function(J){var F=v.find('input[placeholder="一句话介绍自己(可不填)"]').val();if(!J.value){v.find('select[name="shi"]').html('<option value="" selected>市</option>')}else{var I=context.region.city[J.value];var H='<option value="" selected>市</option>';for(var G in I){var K=I[G];H+='<option value="'+K+'">'+K+"</option>"}v.find('select[name="shi"]').html(H)}E.render("select","baseinfo");v.find('input[placeholder="一句话介绍自己(可不填)"]').removeAttr("readonly").removeClass("layui-unselect");v.find('input[placeholder="一句话介绍自己(可不填)"]').val(F)});E.on("select(sheng)",function(J){var F=v.find('input[placeholder="一句话介绍自己(可不填)"]').val();if(!J.value){v.find('select[name="address"]').html('<option value="" selected>市</option>')}else{var I=context.region.city[J.value];var H='<option value="" selected>市</option>';for(var G in I){var K=I[G];H+='<option value="'+K+'">'+K+"</option>"}v.find('select[name="address"]').html(H)}E.render("select","baseinfo");v.find('input[placeholder="一句话介绍自己(可不填)"]').removeAttr("readonly").removeClass("layui-unselect");v.find('input[placeholder="一句话介绍自己(可不填)"]').val(F)})});layui.use("laydate",function(){var o=layui.laydate;o.render({elem:v.find('input[name="birthday"]').get(0),type:"month",format:"yyyy.MM",max:0,showBottom:false,ready:function(C){$(".editable-options").remove();$("#"+C.elemID).off("click").on("click",".laydate-month-list li",function(){$("#"+C.elemID).remove()})},change:function(D,E,C){v.find('input[name="birthday"]').val(D)}})});v.find('input[placeholder="一句话介绍自己(可不填)"]').off("click").on("click",function(){if($(this).parent().parent().hasClass("layui-form-selectup")&&$(this).val()){return false}});v.off("click",".custom-del").on("click",".custom-del",function(){$(this).parent().remove()});v.find("#baseinfo-more-btn").off("click").on("click",function(){if($(this).find("i").hasClass("icon-open")){v.find(".baseinfo-more").show();v.find("#baseinfo-add-btn").show();$(this).html('<i class="jlbfont icon-packup" style="font-size:12px!important;"></i> 收起可选字段')}else{v.find(".baseinfo-more").hide();v.find("#baseinfo-add-btn").hide();$(this).html('<i class="jlbfont icon-open" style="font-size:12px!important;"></i> 更多可选字段')}});v.find("#baseinfo-add-btn").off("click").on("click",function(){v.find(".baseinfo-more").show();var C=v.find(".baseinfo-custom input").size();var o='<div class="layui-inline"><label class="layui-form-label custom-label" contenteditable="true" placeholder="自定义标题"></label><div class="layui-input-inline"><input type="text" name="custom'+(C+1)+'" lay-verify="limit" autocomplete="off" placeholder="自定义内容" class="layui-input"></div><span class="layui-badge custom-del">x</span></div>';$(this).parent().prev().append($(o))});c=p},yes:function(e,f){layui.use(["form"],function(){var g=layui.form;g.on("submit(formVerify)",function(r){a=r.field.job;$("#avater-wrapper").attr("data-show",r.field.photo);if(-1!="tpl124|tpl125".indexOf(context.tplkey)){$("#baseinfo-table").attr("data-show",r.field.photo)}if("hide"==r.field.photo){$("#baseinfo-panel-left").attr("data-width","100%")}else{$("#baseinfo-panel-left").removeAttr("data-width")}r.field.intro=f.find('input[placeholder="一句话介绍自己(可不填)"]').val();if(-1!="tpl110|tpl117|tpl123|tpl124|tpl125".indexOf(context.tplkey)){for(var q in r.field){var x=r.field[q];if(x){if(q=="birthday"){var m=(new Date().getFullYear()-x.substring(0,4))+"岁";$('#baseinfo span[key="age"]').attr("birthday",x).text(m)}else{if("from"==q){var s=f.find('select[name="shi"]').val();$('#baseinfo span[key="from"]').attr("val",x).attr("shi",s).text(x+(s==x?"":s));if(-1=="tpl124|tpl125".indexOf(context.tplkey)){$('#baseinfo span[key="from"]').parent().removeAttr("style")}}else{if("address"==q){var o=f.find('select[name="sheng"]').val();$('#baseinfo span[key="address"]').attr("val",x).attr("sheng",o).text((o==x?"":o)+x);if(-1=="tpl124|tpl125".indexOf(context.tplkey)){$('#baseinfo span[key="address"]').attr("val",x).parent().removeAttr("style")}}else{if("sheng"!=q&&"shi"!=q&&"photo"!=q&&"format"!=q){$('#baseinfo span[key="'+q+'"]').text(x);if((-1=="tpl124|tpl125".indexOf(context.tplkey))&&"intro"!=q){$('#baseinfo span[key="'+q+'"]').parent().removeAttr("style")}}}}}}else{$('#baseinfo span[key="'+q+'"]').removeAttr("val").removeAttr("sheng").removeAttr("shi").text("");if(-1=="tpl124|tpl125".indexOf(context.tplkey)){$('#baseinfo span[key="'+q+'"]').parent().attr("style","display:none")}}}}else{var y="",u="",w="",n="",t="";if("col"==d){for(var q in r.field){var x=r.field[q];var p=$('input[name="'+q+'"],select[name="'+q+'"]').attr("label");if(x){if(q=="birthday"){var m=(new Date().getFullYear()-x.substring(0,4))+"岁";w+=('<span class="baseinfo-row"><span class="baseinfo-label">'+p+'：</span><span class="baseinfo-value editable" key="age" val="'+m+'" birthday="'+x+'">'+m+"</span></span>")}else{if("from"==q){var s=f.find('select[name="shi"]').val();w+=('<span class="baseinfo-row"><span class="baseinfo-label">'+p+'：</span><span class="baseinfo-value editable" key="from" val="'+x+'" shi="'+s+'">'+x+(s==x?"":s)+"</span></span>")}else{if("address"==q){var o=f.find('select[name="sheng"]').val();w+=('<span class="baseinfo-row"><span class="baseinfo-label">'+p+'：</span><span class="baseinfo-value editable" key="address" val="'+x+'" sheng="'+o+'">'+(o==x?"":o)+x+"</span></span>")}else{if("sheng"!=q&&"shi"!=q&&"intro"!=q&&"photo"!=q&&"format"!=q){if(-1!=q.indexOf("custom")){p=f.find('input[name="'+q+'"]').parent().prev().text().replace(/(^s*)|(s*$)/g,"");switch(p.length){case 2:p=p.substring(0,1)+"　　"+p.substring(1);break;case 3:p=p+"　";break}}w+=('<span class="baseinfo-row"><span class="baseinfo-label">'+p+'：</span><span class="baseinfo-value editable" key="'+q+'">'+x+"</span></span>")}}}}}}var j=f.find('input[placeholder="一句话介绍自己(可不填)"]').val();j=(j||"").replace(/(^\s*)|(\s*$)/g,"");if(j){$("#baseinfo").attr("intro",j)}}else{if(-1!=="tpl107|tpl126|tpl127|tpl131|tpl104|tpl116".indexOf(context.tplkey)){t=' style="color:#'+context.theme+';"';if("tpl131"==context.tplkey){t=' style="color:#'+context.theme+";border-bottom-color:#"+context.theme+';"'}}for(var q in r.field){var x=r.field[q];if(q=="name"){u='<span class="baseinfo-item baseinfo-title"'+t+'><span class="baseinfo-value editable" key="name">'+x+"</span></span>"}else{if(q=="intro"){var j=f.find('input[placeholder="一句话介绍自己(可不填)"]').val();j=(j||"").replace(/(^\s*)|(\s*$)/g,"");if(j){n='<span class="baseinfo-item baseinfo-intro"><span class="baseinfo-value editable" key="intro">'+j+"</span></span>"}else{n='<span class="baseinfo-item baseinfo-intro" style="display:none;"><span class="baseinfo-value editable" key="intro"></span></span>'}}else{if(x){if(q=="birthday"){var m=(new Date().getFullYear()-x.substring(0,4))+"岁";if("en"==context.cvlang){var m=(new Date().getFullYear()-x.substring(0,4))+"yrs Old"}w+=('<span class="baseinfo-value editable" key="age" val="'+m+'" birthday="'+x+'">'+m+"</span>")}else{if("years"==q){w+=('<span class="baseinfo-value editable" key="years">'+x+"</span>");if(r.field.edu){w+=('<span class="baseinfo-value editable" key="edu">'+r.field.edu+"</span>")}}else{if("from"==q){var s=f.find('select[name="shi"]').val();w+=('<span class="baseinfo-value editable" key="from" val="'+x+'" shi="'+s+'">籍贯'+x+"</span>")}else{if("address"==q){var o=f.find('select[name="sheng"]').val();w+=('<span class="baseinfo-value editable" key="address" val="'+x+'" sheng="'+o+'">现居'+x+"</span>")}else{if("sheng"!=q&&"shi"!=q&&"photo"!=q&&"format"!=q&&"edu"!=q){var p="";if(-1!=q.indexOf("custom")){p=f.find('input[name="'+q+'"]').parent().prev().text();p=!p?"":p+"："}w+=('<span class="baseinfo-value editable" key="'+q+'">'+p+x+"</span>")}}}}}}}}}$("#baseinfo").removeAttr("intro")}$("#baseinfo").attr("format",d);var h=$("<span>"+w+"</span>").find(".baseinfo-value").size();h="col"!=d?h+1:h;if(h>8){$("#baseinfo").attr("colnum","gt8")}else{$("#baseinfo").removeAttr("colnum")}y=u+'<span class="baseinfo-item baseinfo-fields">'+w+"</span>"+n;$("#baseinfo-panel-left").html(y)}if(a&&c!=a){$("#resume-tips-btn").click();$("#resume-tips input").val(a+" 范文");$("#resume-tips .layui-text a").eq(0).text(a+"完整简历范文").attr("href","http://zhannei.baidu.com/cse/search?s=12824040485760848050&q="+a+" 简历");$("#resume-tips .layui-text a").eq(1).text(a+"自我评价怎么写").attr("href","http://zhannei.baidu.com/cse/search?s=12824040485760848050&q="+a+" 自我评价");$("#resume-tips .layui-text a").eq(2).text(a+"工作经历案例").attr("href","http://zhannei.baidu.com/cse/search?s=12824040485760848050&q="+a+" 工作经历");$("#resume-tips .layui-text a").eq(3).text(a+"项目经验怎么写").attr("href","http://zhannei.baidu.com/cse/search?s=12824040485760848050&q="+a+" 项目经验")}context.savedToServer(false);context.integr.push("1");layer.close(e);return false})})}});context.trace("editor-baseinfo-baseopen")});if(!context.region){$.post(context.host+"index/region",{},function(a){try{context.region=$.parseJSON(a)}catch(b){console.log(b);console.log(a)}})}$("body").on("click",".page-one-btn,.page-two-btn",function(){var c=1345;var a="缩成一页";if($(this).hasClass("page-two-btn")){c=2690;a="缩成二页"}$("body").off("mouseenter","#page-line-one,#page-line-two");$(this).remove();var b=1.6;var f=15;var e=21;var g=1;d(b,f,e);function d(h,l,k){if(h<=0.2){return false}if((g%3==0)&&h<1.1){g++}if((g%3==1)||g%3==2){h=h-0.05;if(k>0){k=k-3}}if((g%3==0)&&l>12){l=l-0.5}setResumeLineSpace(h.toFixed(2));setResumeFontSize(l);setResumeBlockSpace(k);var j=setTimeout(function(){context.savedToServer(false);showAndHidePageLine();var n=$("#content").height();if("tpl104"==context.tplkey){n=n+50}if("tpl114"==context.tplkey){n=n+20}if(n>c){d(h,l,k);g++}else{h=h+0.05;setResumeLineSpace(h.toFixed(2));var m=setTimeout(function(){context.savedToServer(false);showAndHidePageLine();var p=$("#content").height();if("tpl104"==context.tplkey){p=p+50}if("tpl114"==context.tplkey){p=p+20}if(p>c){h=h-0.05;setResumeLineSpace(h.toFixed(2));var o=setTimeout(function(){context.savedToServer(false);showAndHidePageLine();clearTimeout(o)},300)}clearTimeout(m)},300)}clearTimeout(j)},300)}context.integr.push("7");context.historyBak({parent:null,child:null,action:"onepage",text:a})});$("#operate-down").click(function(e){if(!context.user){$("#header .jlb-login-link").click();return false}if(!context.hasSavedToServer){layer.msg("简历有改动，请先保存简历");return false}context.pv("/download/open");context.trace("editor-operate-expopen");var a="";if("month"==context.vip){a="基础VIP"}else{if("year"==context.vip){a="基础VIP"}else{if("life"==context.vip){a="超级VIP"}}}var f='<span class="layui-badge layui-bg-gray" style="border-radius:10px;">免费</span>';var g='<span class="layui-badge layui-bg-gray" style="border-radius:10px;">免费</span>';var d='<span class="layui-badge layui-bg-gray" style="border-radius:10px;">VIP专享</span>';var c='<table id="resume-export-panel" style="border:0px;cellpadding:0px;font-size:13px;text-align:center;margin-top:40px;" align="center">';c+='<tr><td><button id="operate-img" class="layui-btn layui-btn-normal" style="left:5px;top:120px;background:#009688" data-trace="editor-export-downimg"><i class="layui-icon" style="font-size:20px;color:#fff;">&#xe64a;</i> 下载图片</button></td>';c+="<td>&nbsp;</td>";c+='<td><button id="operate-pdf" class="layui-btn layui-btn-normal" style="left:5px;top:120px;background:#FF5722" data-trace="editor-export-downpdf"><i class="jlbfont icon-pdf" style="font-size:17px;color:#fff;"></i> 下载PDF</button></td>';c+="<td>&nbsp;</td>";c+='<td><button id="operate-word" class="layui-btn layui-btn-normal" style="left:5px;top:120px;background:#5E8EE0" data-trace="editor-export-downword"><i class="jlbfont icon-word" style="font-size:18px;color:#fff;"></i> 下载Word</button></td></tr>';c+='<tr style="color:#888"><td style="padding:10px 0px">'+f+"</td>";c+='<td width="30">&nbsp;</td>';c+="<td>"+g+"</td>";c+='<td width="30">&nbsp;</td>';c+="<td>"+d+"</td></tr>";c+='<tr><td colspan="5" align="center" style="padding-top:20px"><span style="font-size:13px;color:#FFB800;"><i class="layui-icon" style="font-size:14px;font-weight:bold;">&#xe702;</i> 注意不要使用迅雷、旋风等第三方下载器下载！</span></td></tr>';c+="</table>";c+='<div style="background:#aaa;margin:30px -20px -20px;text-align:center;height:70px;line-height:70px">';c+='<label style="font-size:18px;line-height:18px;margin-right:30px;color:#fff;font-style:italic;">升级VIP，更多好功能！</label><button id="vip-btn" class="layui-btn layui-btn-primary" data-trace="editor-vip-vipdn" style="color:#1E9FFF"><i class="jlbfont icon-vip1" style="color:#FFB800;font-size:14px"></i> 升级VIP</button>';c+="</div>";var b="简历下载";if(context.vip){b='简历下载 <span class="layui-badge layui-bg-orange"><i class="jlbfont icon-vip1" style="font-size:12px;"></i>'+a+"</span>"}layer.open({type:1,title:b,content:c,area:"600px",shade:0.7,shadeClose:true})});$("body").on("mouseenter","#imgNumText",function(){imgNumTips=layer.tips("今天剩余"+context.imgNum+"次",this,{tips:3,tipsMore:true})}).on("mouseleave","#imgNumText",function(){layer.close(imgNumTips)});$("body").on("mouseenter","#pdfNumText",function(){pdfNumTips=layer.tips("今天剩余"+context.pdfNum+"次",this,{tips:3,tipsMore:true})}).on("mouseleave","#pdfNumText",function(){layer.close(pdfNumTips)});$("body").on("mouseenter","#wordNumText",function(){wordNumTips=layer.tips("今天剩余"+context.wordNum+"次",this,{tips:3,tipsMore:true})}).on("mouseleave","#wordNumText",function(){layer.close(wordNumTips)});$("body").on("click","#operate-img",function(){context.pv("/download/img");if(!context.vip&&parseInt(context.imgNum)<1){layer.msg("普通用户每天可下载1次图片，升级VIP不限下载数",{time:0,btn:["升级VIP","取消"],btn1:function(d,e){layer.close(d);$("#vip-link").click()},btn2:function(d,e){layer.close(d)}});context.pv("/download/img/secondlimit");return false}if(context.vip){context.pv("/download/img/vipdown")}else{context.pv("/download/img/firstfree")}var a=$("#resume-paper").find("img");var b=[];a.each(function(d){var g=$(this).attr("src");b[d]=g;if(g&&-1!=g.indexOf("thumb.")){var e=g.split(".com/");var f=e[e.length-1];$(this).attr("src",context.host+"resume/imgstream?p="+f)}});$('<script type="text/javascript" src="'+context.res+'lib/fish/fishCanvas.js"><\/script>').appendTo($("body"));$(window).scrollTop(0);var c=layer.msg("正在生成图片简历...",{icon:16,shade:0.7,time:0});setTimeout(function(){try{html2canvas($("#content").get(0)).then(function(h){try{var g=h.toDataURL("image/jpeg",1);var j=$(".resume-name").text();if(!j){j="我的简历"}var f=$("#imgCvDown");if(f.size()<1){f=$('<a id="imgCvDown" href="'+g+'" download="'+j+'.jpg">').appendTo($("body"))}else{f.attr("href",g).attr("download",j+".jpg")}f[0].click();layer.close(c);if(!context.vip&&parseInt(context.imgNum)>0){context.imgNum=parseInt(context.imgNum)-1;$.get(context.host+"resume/imgdown",{},function(e){})}}catch(k){a.each(function(e){$(this).attr("src",b[e])});layer.close(c);layer.msg("下载失败！Windows系统自带的IE、Edge浏览器不支持图片下载，请使用其他浏览器！",{time:0,btn:["知道了"]})}a.each(function(e){$(this).attr("src",b[e])})})}catch(d){a.each(function(e){$(this).attr("src",b[e])});layer.close(c);layer.msg("下载失败！Windows系统自带的IE、Edge浏览器不支持图片下载，请使用其他浏览器！",{time:0,btn:["知道了"]})}},1500)});$("body").on("click","#operate-pdf",function(a){context.pv("/download/pdf");if((!context.vip||"month"==context.vip||"year"==context.vip)&&parseInt(context.pdfNum)>1){layer.msg(context.vip?"今日PDF下载数已用完，升级超级VIP不限下载数":"普通用户可免费下载1次PDF，升级VIP不限下载数",{time:0,btn:["升级VIP","取消"],btn1:function(c,d){layer.close(c);$("#vip-link").click()},btn2:function(c,d){layer.close(c)}});context.pv("/download/pdf/secondlimit");return false}if(context.vip){context.pv("/download/pdf/vipdown")}else{context.pv("/download/pdf/firstfree")}var b=layer.msg("正在生成PDF简历...",{icon:16,shade:0.7,time:0});$.ajax({type:"post",url:context.host+"resume/pdf",data:{resumeId:context.resume,tplId:context.tplid,tplKey:context.tplkey,theme:context.theme,resumeNo:$('input[name="resumeNo"]').val(),pdfExport:$('input[name="pdfExport"]').val(),status:context.status,page:context.page},success:function(c){try{c=$.parseJSON(c)}catch(d){layer.msg("下载失败，请稍后再试");return false}if(!c){layer.msg("下载失败，请稍后再试");return false}if(0===c.retCode){$('input[name="pdfExport"]').val(c.retText);b=layer.msg("正在准备下载...",{icon:16,shade:0.7,time:0});setTimeout(function(){document.pdfForm.submit();layer.close(b);if(parseInt(context.pdfNum)>=1){context.pdfNum=parseInt(context.pdfNum)-1;if(context.vip&&parseInt(context.pdfNum)<1){layer.msg("今日PDF下载数已用完，升级超级VIP不限下载数",{time:0,btn:["升级VIP","取消"],btn1:function(e,f){layer.close(e);$("#vip-link").click()},btn2:function(e,f){layer.close(e)}})}}},1000)}else{layer.msg(c.retText)}},error:function(c){layer.msg("下载失败，请稍后再试")}})});$("body").on("click","#operate-word",function(a){context.pv("/download/word");if(context.word==-1){layer.msg("此模板暂不支持Word格式下载<br/>您可以下载图片、PDF格式，或更换其他模板",{time:0,btn:["知道了"]});return false}if(!context.vip){layer.msg("下载Word为VIP权限，请先升级VIP",{time:0,btn:["升级VIP","取消"],btn1:function(c,d){layer.close(c);$("#vip-link").click()},btn2:function(c,d){layer.close(c)}});context.pv("/download/word/firstlimit");return false}else{context.pv("/download/word/vipdown")}if(("month"==context.vip)&&parseInt(context.wordNum)<1){layer.msg("今日Word下载数已用完，升级超级VIP不限下载数",{time:0,btn:["升级VIP","取消"],btn1:function(c,d){layer.close(c);$("#vip-link").click()},btn2:function(c,d){layer.close(c)}});return false}var b=layer.msg("正在生成Word简历...",{icon:16,shade:0.7,time:0});$.ajax({type:"post",url:context.host+"resume/word",data:{resumeId:context.resume,tplId:context.tplid,tplKey:context.tplkey,theme:context.theme,resumeNo:$('input[name="resumeNo"]').val(),wordExport:$('input[name="wordExport"]').val(),status:context.status,page:context.page},success:function(c){try{c=$.parseJSON(c)}catch(d){layer.msg("下载失败，请稍后再试");return false}if(!c){layer.msg("下载失败，请稍后再试");return false}if(0===c.retCode){$('input[name="wordExport"]').val(c.retText);b=layer.msg("正在准备下载...",{icon:16,shade:0.7,time:0});setTimeout(function(){document.wordForm.submit();layer.close(b)},1000);if(parseInt(context.wordNum)>=1){context.wordNum=parseInt(context.wordNum)-1;if(parseInt(context.wordNum)<1){layer.msg("今日Word下载数已用完，升级超级VIP不限下载数",{time:0,btn:["升级VIP","取消"],btn1:function(e,f){layer.close(e);$("#vip-link").click()},btn2:function(e,f){layer.close(e)}})}}}else{layer.msg(c.retText)}},error:function(c){layer.msg("下载失败，请稍后再试")}})});$("#operate-import").click(function(){if(!context.user){$("#header .jlb-login-link").click();return false}if(!context.hasSavedToServer){layer.msg("简历有改动，请先保存简历");return false}var a="";if("month"==context.vip){a="基础VIP"}else{if("year"==context.vip){a="基础VIP"}else{if("life"==context.vip){a="超级VIP"}}}var c='<table id="resume-import-panel" style="border:0px;cellpadding:0px;font-size:13px;text-align:center;" align="center">';c+='<tr><td align="center" style="color:#aaa">导入简历内容，1秒钟简历大变身</td></tr>';c+='<tr><td><button id="operate-imp" class="layui-btn layui-btn-normal" style="margin-top:20px;">导入简历</button><br/></td></tr>';c+='<tr><td align="center" style="padding-top:20px"><span style="font-size:13px;color:#FFB800;"><i class="layui-icon" style="font-size:14px;font-weight:bold;">&#xe702;</i> 支持导入doc/docx/pdf/html/txt格式简历，2MB以内</span></td></tr>';c+="</table>";c+='<div class="layui-progress" lay-showpercent="true" style="margin:40px -20px -20px;border-radius:0px;" lay-filter="import"><div class="layui-progress-bar layui-bg-blue" lay-percent="0%" style="width:0%;border-radius:0px;"><span class="layui-progress-text" style="display:none;">0%</span></div></div>';var b="导入简历";if(context.vip){b='导入简历 <span class="layui-badge layui-bg-orange"><i class="jlbfont icon-vip1" style="font-size:12px;"></i>'+a+"</span>"}var d=layer.open({type:1,title:b,content:c,area:"450px",shade:0.7,shadeClose:true});layui.use(["upload","element"],function(){var f=layui.upload;var g=layui.element;var h={per:0,timer:null,setPercent:function(j){g.progress("import",j+"%");clearInterval(h.timer)},loading:function(j){h.timer=setInterval(function(){h.per=h.per+Math.random()*10|0;if(h.per>=100){h.per=100;clearInterval(h.timer)}g.progress("import",h.per+"%")},300+Math.random()*1000)}};var e=f.render({elem:"#operate-imp",url:context.host+"resume/import",before:function(j){if(!context.user){layer.msg("请先登录");return false}if(!context.vip){layer.msg("导入简历为VIP权限，请先升级VIP",{time:0,btn:["升级VIP","取消"],btn1:function(k,l){layer.close(k);$("#vip-link").click()},btn2:function(k,l){layer.close(k)}});return false}h.loadingIndex=layer.msg("正在上传...",{icon:16,shade:0.7,time:0});$("#resume-import-panel").next(".layui-progress").find(".layui-progress-text").show();$("#resume-import-panel").parent(".layui-layer-content").css("overflow-y","hidden");h.loading(5)},done:function(j){layer.close(h.loadingIndex);if(j&&j.retCode==0){h.setPercent(100);if("editor"==context.page){var k=layer.msg("正在刷新简历...",{icon:16,shade:0.7,time:0});$.get(j.retText,{},function(l){try{l=$.parseJSON(l);if(0==l.retCode){location.href=context.host+"user/resume/"+l.retText}else{layer.msg(l.retText)}}catch(m){layer.msg("返回数据错误，请联系客服");context.err("switchRet="+l+", page="+context.page)}})}else{layer.confirm("导入的简历将覆盖当前简历，确定导入吗？",{title:"提示",btn:["确定导入","取消"]},function(l,m){layer.close(l);var n=layer.msg("正在刷新简历...",{icon:16,shade:0.7,time:0});$.get(j.retText,{},function(o){try{o=$.parseJSON(o);if(0==o.retCode){location.href=context.host+"user/resume/"+o.retText}else{layer.msg(o.retText)}}catch(p){layer.msg("返回数据错误，请联系客服");context.err("switchRet="+o+", page="+context.page)}})},function(l,m){layer.close(l)})}}else{h.setPercent(0);layer.msg(j.retText,{icon:2,anim:6})}},error:function(){layer.close(h.loadingIndex);h.setPercent(0);$("#resume-import-panel").next(".layui-progress").find(".layui-progress-text").hide();layer.msg("简历导入错误，请稍后再试",{icon:2,anim:6})},field:"file",accept:"file",exts:"doc|docx|pdf|html|txt",size:2*1024,data:{resumeId:context.resume,tplId:context.tplid,tplKey:context.tplkey,theme:context.theme,page:context.page,cvlang:context.cvlang}})})});$("#operate-send").click(function(g){if(!context.user){$("#header .jlb-login-link").click();return false}if("editor"==context.page){layer.msg("请先完善简历");return false}if(!context.hasSavedToServer){layer.msg("简历有改动，请先保存简历");return false}var f=$('span.baseinfo-value[key="email"]').text()||"";var h=$('span.baseinfo-value[key="name"]').text()||"";var d=$('span.baseinfo-value[key="job"]').text()||"";var e='<div contenteditable="true" style="outline:none;">尊敬的<b style="font-style:italic;">XX公司</b>招聘负责人，您好！<br><br>我叫<b style="font-style:italic;">'+h+'</b>，现申请面试贵公司<b style="font-style:italic;">'+d+'</b>岗位，以下是我的简历，请您查收！<div><br></div><div><br></div><div><br></div></div><div style="padding-top:20px;border-top:1px #e5e5e5 dashed;width:100%;">我的简历：<a href="'+$('input[name="resumeUrl"]').val()+'" target="_blank" style="text-decoration:underline;color:#1E9FFF;">'+$('input[name="resumeUrl"]').val()+"</a>";if($('input[name="resumeSec"]').val()==3){e+="&nbsp&nbsp&nbsp（密码: <span>"+$('input[name="resumePasswd"]').val()+"</span>）"}e+="</div>";var b='<form name=mail_form style="text-align:center;">';b+='<div style="background:#f5f5f5;width:800px;margin:20px auto 0px auto;">';b+='<div style="width:98%;border-bottom:1px #ddd solid;margin:0px auto;padding-top:15px;padding-bottom:5px;"><label style="color:#666">发件人　&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label><input type=text name=send_address placeholder=发件人邮箱  style="width:40%;padding:6px 5px;border:none;background:none;" value="'+f+'"><input type=text name=send_name placeholder=发件人名称 style="width:46%;padding:6px 5px;border:none;background:none;" value="'+h+'"></div>';b+='<div style="width:98%;border-bottom:1px #ddd solid;margin:0px auto;padding-top:15px;padding-bottom:5px;"><label style="color:#666">收件人　&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label><input type=text name=mail_address placeholder=收件人邮箱  style="width:40%;padding:6px 5px;border:none;background:none;"><input type=text name=mail_name placeholder=收件人名称，如：华为公司  style="width:46%;padding:6px 5px;border:none;background:none;"></div>';b+='<div style="width:98%;margin:0px auto;padding-top:15px;padding-bottom:5px;"><label style="color:#666">邮件标题&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label><input type=text name=mail_subject placeholder="如：产品经理_产品经理_5年" style="width:87%;padding:6px 5px;border:none;background:none;" value="'+$('input[name="resumeName"]').val()+'"></div>';b+="</div>";b+='<div class="mail_content" style="width:768px;min-height:200px;padding:30px 15px;margin:0px auto;text-align:left;border:1px #ddd solid;">'+e+"</div>";b+='<div style="width:800px;margin:10px auto 0px auto;">';b+='<span style="color:#666;display:inline-block;border:2px #ccc dashed;padding:8px 10px;float:left;background:#f8f8f8;" onmouseenter="addPdfTips=layer.tips(\'勾选发送PDF简历附件\', this, {tips:2,tipsMore:true})" onmouseleave="layer.close(addPdfTips)">附件：<i class="jlbfont icon-pdf" style="margin-right:3px;color:#FF5722;"></i>'+$('input[name="resumeName"]').val()+'.pdf &nbsp;&nbsp;&nbsp;<input type=checkbox name=mail_pdf style="vertical-align:middle;width:20px;height:20px;" /></span>';b+='<span id="mail_tips" style="text-align:right;padding:10px 0px;color:#aaa;font-size:13px;float:right;"><i class="layui-icon" style="font-size:14px;font-weight:bold;">&#xe702;</i> 邮箱地址填写错误或频繁发送邮件，可能会导致邮件发送失败</span>';b+="</div>";b+="</form>";var a="";if("month"==context.vip){a="基础VIP"}else{if("year"==context.vip){a="基础VIP"}else{if("life"==context.vip){a="超级VIP"}}}var c="发送简历";if(context.vip){c='发送简历 <span class="layui-badge layui-bg-orange"><i class="jlbfont icon-vip1" style="font-size:12px;"></i>'+a+"</span>"}layer.open({type:1,title:c,content:b,shade:0.7,area:"880px",btn:["立即发送","取消"],shadeClose:true,yes:function(n,j){var q=document.mail_form.mail_subject.value;var s=document.mail_form.mail_address.value;var m=document.mail_form.send_address.value;var l=document.mail_form.mail_name.value;var p=$('form[name="mail_form"] div.mail_content').html().replace('contenteditable="true"',"");var r=document.mail_form.mail_pdf.checked;if(!(/^[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]*)*@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(m))){layer.msg("发件邮箱格式不正确");return false}if(!(/^[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]*)*@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(s))){layer.msg("收件邮箱格式不正确");return false}if(q.length>100){layer.msg("邮件标题不能超过100字");return false}if($('input[name="mail_pdf"]').is(":checked")&&!context.vip){layer.msg("发送简历附件为VIP权限，请先升级VIP");return false}var k=layer.msg("正在发送...",{icon:16,shade:0.7,time:0});$.post(context.host+"resume/mail",{resumeId:context.resume,resumeNo:$('input[name="resumeNo"]').val(),tplId:context.tplid,tplKey:context.tplkey,theme:context.theme,status:context.status,fromName:h,toName:l,mailSubject:q,mailAddress:s,sendAddress:m,sendAttach:r?1:0,pdfExport:$('input[name="pdfExport"]').val(),mailContent:p},function(o){try{o=$.parseJSON(o)}catch(t){layer.msg("发送失败，请稍后再试");return false}if(!o){layer.msg("发送失败，请稍后再试");return false}if(0===o.retCode){layer.msg("发送成功");layer.close(n);if(o.pdfExport){$('input[name="pdfExport"]').val(o.pdfExport)}}else{if(-2===o.retCode){layer.msg("发送成功，附件绑定失败")}else{if(-1===o.retCode){layer.msg(o.retText)}else{layer.msg("发送失败，请稍后再试")}}}})}});$('input[name="mail_pdf"]').change(function(){if($(this).is(":checked")){if(!context.vip){layer.msg("发送附件为VIP权限，请先升级VIP",{time:0,btn:["升级VIP","取消"],btn1:function(j,k){layer.close(j);$("#vip-link").click()},btn2:function(j,k){layer.close(j)}},function(){$('input[name="mail_pdf"]').attr("checked",false).parent().css("border-color","#CCC")})}$(this).parent().css("border-color","#1E9FFF")}else{$(this).parent().css("border-color","#CCC")}});$('input[name="mail_name"]').blur(function(){$('form[name="mail_form"]').find("b").eq(0).text($(this).val()||"XX公司")})});$("#resume-his").click(function(a){if($("#resume-his-panel").size()>0){return false}var b=$('<div id="resume-his-panel" style="width:260px;top:80px;bottom:0px;background:#fff;position:fixed;left:-270px;overflow-y:auto;box-shadow:0px 0px 5px #666;z-index:100;"></div>').appendTo($("body"));b.append('<div class="tips-title">共<b> '+context.historyBakArr.length+' </b>条操作记录<span onclick="historyPanelClose(this);" class="tips-close" style="left:auto;right:3px;"><i class="layui-icon">&#x1006;</i></span></div>');b.append('<ul class="layui-timeline" style="margin:25px 0px 0px 10px;"></ul>');b.animate({left:0},200);historyPanelRender()});function historyPanelRender(){var b="";for(var a=context.historyBakArr.length-1;a>=0;a--){b+='<li class="layui-timeline-item">';b+='<i class="layui-icon layui-timeline-axis">&#xe60e;</i>';b+='<div class="layui-timeline-content layui-text">';b+='<p class="layui-timeline-title">'+context.historyBakArr[a]["time"]+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+context.historyBakArr[a]["text"]+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";if(context.historyBakArr[a]["cancel"]){b+='<button class="layui-btn layui-btn-disabled layui-btn-xs" data-index="'+a+'" onclick="historyBakRestore(this);">已撤销</button></p>'}else{b+='<button class="layui-btn layui-btn-primary layui-btn-xs" data-index="'+a+'" onclick="historyBakRestore(this);" data-trace="editor-operate-hisredo">撤销</button></p>'}b+="</div>";b+="</li>"}$("#resume-his-panel ul").html(b)}function historyBakRestore(e){var c=parseInt($(e).attr("data-index"));var b=context.historyBakArr[c];var d=context.historyBakArr[c+1];if(d&&!d.cancel){layer.msg("请先撤销上一步操作");return false}switch(b.action){case"after":b.parent.after(b.child);break;case"before":b.parent.before(b.child);break;case"html":b.parent.html(b.child);b.parent.removeData("data-his");b.parent.removeData("data-hised");break;case"onepage":setResumeFontSize("15px");setResumeLineSpace("1.6em");setResumeBlockSpace("20px");setTimeout(function(){showAndHidePageLine()},300);break;case"describe":b.parent.removeAttr("data-desc");b.child.show();break;case"photo":b.parent.removeAttr("data-width");b.child.removeAttr("data-show");break}$(e).text("已撤销").removeClass("layui-btn-primary").addClass("layui-btn-disabled");context.historyBakArr[c].cancel=true;context.savedToServer(false);showAndHidePageLine()}function historyPanelClose(a){$(a).parent().parent().animate({left:-650},200,function(){$(this).remove()})}$("#operate-diagnose").click(function(b){if(!context.user){layer.msg("请先登录");return false}if(!context.hasSavedToServer){layer.msg("简历有改动，请先保存简历");return false}var a='<table id="resume-info-panel" style="border:0px;cellpadding:0px;font-size:13px;text-align:center;margin-top:10px;" align="center">';a+='<tr><td align="right" style="padding:10px;position:relative;background:#eee;height:80px;width:80px;border-radius:100px;">';a+='<i class="layui-icon" style="font-size:80px;position:absolute;left:11px;top:32px;color:#009688;">&#xe631;</i>';a+='<button id="operate-auto" class="layui-btn" style="position:absolute;left:5px;top:120px;">智能诊断</button></td>';a+='<td width="50">&nbsp;</td>';a+='<td align="left" style="padding:10px;position:relative;background:#eee;height:80px;width:80px;border-radius:100px;">';a+='<i class="layui-icon" style="font-size:64px;position:absolute;left:20px;top:35px;color:#1E9FFF;">&#xe770;</i>';a+='<button id="operate-human" class="layui-btn layui-btn-normal" style="position:absolute;left:5px;top:120px;">人工优化</button></td></tr>';a+="</table>";layer.open({type:1,title:"简历诊断",content:a,area:["420px","270px"],shade:0.7,shadeClose:true})});$("#operate-preview").click(function(){if(!context.hasSavedToServer){layer.msg("简历有改动，请先保存简历");return false}var a=$('<div id="cv-view-panel" style="position:fixed;width:100%;top:0px;bottom:0px;background:rgba(0, 0, 0, 0.85);z-index:1000;overflow:auto;"></div>').appendTo($("body"));a.append('<div id="cv-view-panel-x" style="position:fixed;width:30px;height:30px;top:10px;right:25px;cursor:pointer;color:#f5f5f5;transition:.2s linear"><i class="layui-icon" style="font-size:30px;">&#x1006;</i></div>');var b=$("#content").clone();b.find("#avater-wrapper").find("#upload-btn").remove();b.find("#avater-wrapper").find("#upload-ldg").remove();b.find("#avater-wrapper").find("#photo-close-btn").remove();b.find("#avater-wrapper").find(".layui-upload-file").remove();b.find(".editable-options").remove();b.find(".content-corner").remove();b.find("a.add-del-btn:not(a.skill-del-btn)").remove();b.find(".editable").removeAttr("contenteditable").removeClass("editable-hover").removeClass("editable-focus");if(b.find("#baseinfo-panel-skill").attr("data-show")=="hide"){b.find("#baseinfo-panel-skill").css("display","none")}a.append(b.css("margin","15px auto").css("box-shadow","none"));if(b.height()>1345){$('<span style="position:absolute;top:1352px;background:rgba(0, 0, 0, 0.85);color:#fff;font-size:12px;text-align:center;width:950px;left:50%;margin-left:-475px;height:16px;line-height:16px;"></span>').appendTo(a).text("— 超出1页 —")}if(b.height()>2690){$('<span style="position:absolute;top:2697px;background:rgba(0, 0, 0, 0.85);color:#fff;font-size:12px;text-align:center;width:950px;left:50%;margin-left:-475px;height:16px;line-height:16px;"></span>').appendTo(a).text("— 超出2页 —")}$("html, body").css("overflow-y","hidden");$("#MEIQIA-BTN-HOLDER").css("display","none");$(".layui-layer-tips").css("z-index",100)});$("body").on("click","#cv-view-panel-x",function(){$("#cv-view-panel").remove();$("html, body").css("overflow-y","");$("#MEIQIA-BTN-HOLDER").css("display","block")}).on("mouseover","#cv-view-panel-x",function(){$(this).css("opacity",0.7);$(this).css("transform","rotate(180deg)")}).on("mouseout","#cv-view-panel-x",function(){$(this).css("opacity",1);$(this).css("transform","rotate(0deg)")});$("body").on("click","#cv-view-panel",function(a){if($.contains($(this).get(0),a.target)){return false}$("#cv-view-panel").remove();$("html, body").css("overflow-y","");$("#MEIQIA-BTN-HOLDER").css("display","block")});$("#operate-security").click(function(a){if(!context.user){$("#header .jlb-login-link").click();return false}if("editor"==context.page){layer.msg("请先完善简历");return false}layer.open({type:1,title:"隐私设置",content:$("#security-panel"),area:"500px",shade:0.7,shadeClose:true,success:function(c,b){layui.use(["form"],function(){var d=layui.form;d.on("radio(sec)",function(g){var f=g.value;var e=g.elem.title;if(1!=f&&2!=f&&3!=f){layer.msg("数据错误，设置失败");return false}$.post(context.host+"resume/setopen",{resumeId:context.resume,resumeSec:f},function(h){h=$.parseJSON(h);if(0==h.retCode){c.find("li.setting-item-resumesec .setting-item-right").attr("val",f);c.find("li.setting-item-resumesec .setting-item-right").text(e);$('input[name="resumeSec"]').val(f);if(3==f){c.find("li.setting-item-passwd").slideDown("fast")}else{c.find("li.setting-item-passwd").slideUp("fast");if(2==f){layer.msg("您已将简历设置为完全公开，任何人可通过简历地址查看您的简历",{time:0,btn:["知道了"]})}}}else{layer.msg("设置失败，请稍后再试")}})})});c.find("li.setting-item-passwd a").off("click").on("click",function(){$.post(context.host+"resume/setpasswd",{resumeId:context.resume},function(d){d=$.parseJSON(d);if(0==d.retCode){c.find("li.setting-item-passwd .setting-item-center span").text(d.retText);$('input[name="resumePasswd"]').val(d.retText)}else{layer.msg("重置失败，请稍后再试")}})});c.find("div.setting-item-center i.icon-copy").off("click").on("click",function(){var d=$(this).prev().text();if(window.clipboardData){window.clipboardData.clearData();clipboardData.setData("text",d);layer.msg("复制成功")}else{var g=$("<input />").val(d).appendTo($("body")).select();try{if(document.execCommand("Copy",false,null)){layer.msg("复制成功")}else{layer.msg("复制失败，请手动复制")}}catch(f){layer.msg("复制失败，请手动复制")}g.remove()}})}})});$("#operate-print").click(function(){var d='<link type="text/css" rel="stylesheet" href="'+context.res+'style/resume.css">';var b='<link type="text/css" rel="stylesheet" href="'+context.res+"style/tpl/"+context.tplkey+'.css">';var c="<style>html body{margin:0px;padding:0px;}#content{margin:0px auto;box-shadow:none;}table{font:inherit;}</style>";var a=$("#content").clone();a.find("#avater-wrapper").find("#upload-btn").remove();a.find("#avater-wrapper").find("#upload-ldg").remove();a.find("#avater-wrapper").find("#photo-close-btn").remove();a.find("#avater-wrapper").find(".layui-upload-file").remove();a.find(".block-tool-box, .field-tool-box").remove();context.print(a.prop("outerHTML"),d+b+c)});$("#header-top .resume-name").click(function(){if(!context.user){layer.msg("请先登录");return false}var b=$('input[name="resumeName"]').val()?$('input[name="resumeName"]').val():"未命名简历";var c='<div style="text-align:left;margin:15px auto 10px auto;color:#AAA;text-align:center;">给您的简历起个名字吧，如：产品经理_郭三刀_5年</div>';c+='<form name=resume_form style="text-align:center;height:30px;"><input type=text name=resume_name placeholder=产品经理_郭三刀_5年 style="width:80%;padding:6px 5px;border:1px solid #CCC;outline:none;box-shadow:inset 1px 1px 2px rgba(0,0,0,.1);" value="'+b+'"><br/><br/>';var a=layer.open({type:1,title:"修改简历名称",content:c,area:"420px",shade:0.7,btn:["确定"],yes:function(d,f){var e=document.resume_form.resume_name.value;if(e.length>30){layer.msg("简历名称不能超过30个字");return false}if(e.replace(/(^s*)|(s*$)/g,"").length==0){layer.msg("简历名称不能为空");return false}if("editor"==context.page){$(".resume-name").text(e);$('input[name="resumeName"]').val(e);layer.close(d);return false}$.post(context.host+"resume/settitle",{resumeId:context.resume,resumeName:e},function(g){g=$.parseJSON(g);if(0==g.retCode){$(".resume-name").text(e);$('input[name="resumeName"]').val(e);layer.msg("简历名称设置成功");layer.close(d)}else{layer.msg("设置失败，请稍后再试")}});return false}})});$(".resume-name").prev().click(function(){$(".resume-name").click()});$("#resume-blockspace").hover(function(){$("#resume-blockspace-panel").slideDown(50)},function(){$("#resume-blockspace-panel").slideUp(50)});$("#resume-blockspace-panel .block-space").mousedown(function(){setResumeBlockSpace($(this).attr("data-val"));$("#resume-blockspace-panel .cus-item span").eq(1).text($(this).attr("data-val").replace("px",""))}).mouseup(function(){setResumeBlockSpaceCallback($(this))});$("#resume-blockspace-panel .cus-item span").eq(0).mousedown(function(){var a=parseInt($(this).next().text())-1;if(a<0){layer.msg("最小只能设为0");return false}setResumeBlockSpace(a+"px")}).mouseup(function(){setResumeBlockSpaceCallback($(this).parent())});$("#resume-blockspace-panel .cus-item span").eq(2).mousedown(function(){var a=parseInt($(this).prev().text())+1;if(a>100){layer.msg("最大只能设为100");return false}setResumeBlockSpace(a+"px")}).mouseup(function(){setResumeBlockSpaceCallback($(this).parent())});function setResumeBlockSpace(a){a=a.toString();if(-1==a.indexOf("px")){a=a+"px"}if("20px"==a){$("#resume-paper tbody").each(function(c){if("baseinfo"==$(this).attr("id")||c==$("#resume-paper tbody").size()-1){return true}var b=$(this).find(".field-value-span");if(b.size()>0){b.eq(b.size()-1).css("margin-bottom","")}});$("#field-list").attr("data-blockspace","20px")}else{$("#resume-paper tbody").each(function(c){if("baseinfo"==$(this).attr("id")||c==$("#resume-paper tbody").size()-1){return true}var b=$(this).find(".field-value-span");if(b.size()>0){b.eq(b.size()-1).css("margin-bottom",a)}});$("#field-list").attr("data-blockspace",a)}$("#resume-blockspace-panel .block-space").css("background","").css("color","");$("#resume-blockspace-panel .cus-item").css("background","").find("span:eq(1)").css("color","");if($('#resume-blockspace-panel .block-space[data-val="'+a+'"]').get(0)){$('#resume-blockspace-panel .block-space[data-val="'+a+'"]').css("background","#f7f9fa").css("color","#1e9fff");$("#resume-blockspace-panel .cus-item span").eq(1).text(a.replace("px",""))}else{$("#resume-blockspace-panel .cus-item span").eq(1).text(a.replace("px","")).css("color","#1e9fff").parent().css("background","#f7f9fa")}}function setResumeBlockSpaceCallback(){setTimeout(function(){context.savedToServer(false);showAndHidePageLine();context.integr.push("7")},200)}$("#resume-linespace").hover(function(){$("#resume-linespace-panel").slideDown(50)},function(){$("#resume-linespace-panel").slideUp(50)});$("#resume-linespace-panel .line-space").mousedown(function(){setResumeLineSpace($(this).attr("data-val"))}).mouseup(function(){setResumeLineSpaceCallback($(this))});$("#resume-linespace-panel .cus-item span").eq(0).mousedown(function(){var a=(parseFloat($(this).next().text())-0.05).toFixed(2);if(a<0.05){layer.msg("最小只能设为0.05");return false}setResumeLineSpace(a)}).mouseup(function(){setResumeLineSpaceCallback($(this).parent())});$("#resume-linespace-panel .cus-item span").eq(2).mousedown(function(){var a=(parseFloat($(this).prev().text())+0.05).toFixed(2);if(a>5){layer.msg("最大只能设为5");return false}setResumeLineSpace(a)}).mouseup(function(){setResumeLineSpaceCallback($(this).parent())});function setResumeLineSpace(a){a=a.toString();if(-1==a.indexOf("em")){if("0"==a.substr(a.length-1,1)){a=parseFloat(a).toFixed(1)}a=a+"em"}if("1.6em"==a){$("tbody:not(#baseinfo) .field-value-span .editable").css("line-height","");$("#field-list").attr("data-linespace","1.6em")}else{$("tbody:not(#baseinfo) .field-value-span .editable").css("line-height",a);$("#field-list").attr("data-linespace",a)}$("#resume-linespace-panel .line-space").css("background","").css("color","");$("#resume-linespace-panel .cus-item").css("background","").find("span:eq(1)").css("color","");if($('#resume-linespace-panel .line-space[data-val="'+a+'"]').get(0)){$('#resume-linespace-panel .line-space[data-val="'+a+'"]').css("background","#f7f9fa").css("color","#1e9fff");$("#resume-linespace-panel .cus-item span").eq(1).text(a.replace("em",""))}else{$("#resume-linespace-panel .cus-item span").eq(1).text(a.replace("em","")).css("color","#1e9fff").parent().css("background","#f7f9fa")}}function setResumeLineSpaceCallback(){setTimeout(function(){context.savedToServer(false);showAndHidePageLine();context.integr.push("7")},200)}$("#resume-fontsize").hover(function(){$("#resume-fontsize-panel").slideDown(50)},function(){$("#resume-fontsize-panel").slideUp(50)});$("#resume-fontsize-panel .font-size").mousedown(function(){setResumeFontSize($(this).attr("data-val"))}).mouseup(function(){setResumeFontSizeCallback($(this))});$("#resume-fontsize-panel .cus-item span").eq(0).mousedown(function(){var a=(parseFloat($(this).next().text())-0.1).toFixed(1);if(a<12){layer.msg("最小只能设为12");return false}setResumeFontSize(a)}).mouseup(function(){setResumeFontSizeCallback($(this).parent())});$("#resume-fontsize-panel .cus-item span").eq(2).mousedown(function(){var a=(parseFloat($(this).prev().text())+0.1).toFixed(1);if(a>24){layer.msg("最大只能设为24");return false}setResumeFontSize(a)}).mouseup(function(){setResumeFontSizeCallback($(this).parent())});function setResumeFontSize(a){a=a.toString();if(-1==a.indexOf("px")){if("0"==a.substr(a.length-1,1)){a=parseFloat(a)}a=a+"px"}$("#field-list").css("font-size",a);$("#baseinfo").css("font-size",a);$("#field-list").attr("data-fontsize",a);$("#resume-fontsize-panel .font-size").css("background","").css("color","");$("#resume-fontsize-panel .cus-item").css("background","").find("span:eq(1)").css("color","");if($('#resume-fontsize-panel .font-size[data-val="'+a+'"]').get(0)){$('#resume-fontsize-panel .font-size[data-val="'+a+'"]').css("background","#f7f9fa").css("color","#1e9fff");$("#resume-fontsize-panel .cus-item span").eq(1).text(a.replace("px",""))}else{$("#resume-fontsize-panel .cus-item span").eq(1).text(a.replace("px","")).css("color","#1e9fff").parent().css("background","#f7f9fa")}}function setResumeFontSizeCallback(){setTimeout(function(){context.savedToServer(false);showAndHidePageLine();context.integr.push("7")},200)}(function(){var c=$("#field-list").attr("data-fontsize")||"15px";var a=$("#field-list").attr("data-linespace")||"1.6em";var b=$("#field-list").attr("data-blockspace")||"20px";if($('#resume-fontsize-panel .font-size[data-val="'+c+'"]').get(0)){$('#resume-fontsize-panel .font-size[data-val="'+c+'"]').css("background","#f7f9fa").css("color","#1e9fff");$("#resume-fontsize-panel .cus-item span").eq(1).text(c.replace("px",""))}else{$("#resume-fontsize-panel .cus-item span").eq(1).text(c.replace("px","")).css("color","#1e9fff").parent().css("background","#f7f9fa")}if($('#resume-linespace-panel .line-space[data-val="'+a+'"]').get(0)){$('#resume-linespace-panel .line-space[data-val="'+a+'"]').css("background","#f7f9fa").css("color","#1e9fff");$("#resume-linespace-panel .cus-item span").eq(1).text(a.replace("em",""))}else{$("#resume-linespace-panel .cus-item span").eq(1).text(a.replace("em","")).css("color","#1e9fff").parent().css("background","#f7f9fa")}if($('#resume-blockspace-panel .block-space[data-val="'+b+'"]').get(0)){$('#resume-blockspace-panel .block-space[data-val="'+b+'"]').css("background","#f7f9fa").css("color","#1e9fff");$("#resume-blockspace-panel .cus-item span").eq(1).text(b.replace("px",""))}else{$("#resume-blockspace-panel .cus-item span").eq(1).text(b.replace("px","")).css("color","#1e9fff").parent().css("background","#f7f9fa")}})();$("#resume-tpl").click(function(){var a="更换模板";if("editor"!=context.page){a+='<font style="color:#bbb;font-size:12px;">&nbsp;&nbsp;&nbsp;不会覆盖已填写的内容</font>'}layer.open({type:1,title:[a,"text-align:center;background-color:#fff;"],content:"",area:["710px","100%"],offset:["0px","0px"],anim:-1,isOutAnim:false,scrollbar:false,move:false,resize:false,btn:[],success:function(c,b){c.css("left","-50%").css("border-radius","0px");c.animate({left:0},500);c.find(".layui-layer-content").css("background","url("+context.res+"lib/layui/css/modules/layer/default/loading-0.gif) center center no-repeat");$.post(context.host+"muban/",{sync:1},function(g){g=$.parseJSON(g);var d="";d+='<ul class="tpl-switch">';for(var e in g){var f="";f+='<li class="tpl-item" tplid="'+g[e]["tpl_id"]+'" tplkey="'+g[e]["tpl_key"]+'">';f+='<img src="'+context.thumb+"tplimg/"+g[e]["tpl_image"]+'" width="136" />';f+='<div class="tpl-item-back">';f+='<button class="tpl-item-btn layui-btn layui-btn-normal">使用</button>';f+='<p class="tpl-item-tplno layui-badge layui-bg-gray">'+g[e]["tpl_no"]+"</p>";f+="</div>";f+="</li>";d+=f}d+="</ul>";c.find(".layui-layer-content").append(d).css("background","")});c.on("click","li",function(){if(!context.hasSavedToServer){layer.msg("简历有改动，请先保存简历");return false}var g=$(this).attr("tplid");var d=$(this).attr("tplkey");if(("en"==context.cvlang)&&-1!="tpl106|tpl110|tpl117|tpl123|tpl124|tpl125".indexOf(d)){layer.msg("该模板暂不支持英文版");return false}var f=$("#avater-wrapper").attr("data-show")||"show";var e=$("#baseinfo").attr("format")||"row";if(context.user&&"editor"!=context.page){$.post(context.host+"resume/switch",{rid:context.resume,tpl:g,photo:f,format:e},function(h){h=$.parseJSON(h);if(0==h.retCode){location.reload()}else{layer.msg(h.retText)}})}else{location.href=context.host+"editor/"+d}})},cancel:function(b,c){c.animate({left:-1*c.width()},300);setTimeout(function(){layer.close(b)},300);return false}})});if("editor"==context.page){layui.use(["layer","form"],function(){var c=layui.form;var b='<form class="layui-form layui-form-pane" lay-filter="cvoptions" action=""><div class="layui-form-item" style="margin:20px 30px 30px 30px"><div class="layui-inline" style="margin:10px 0px;"><label class="layui-form-label">求职身份</label><div class="layui-input-inline" style="margin:0 0 0 -1px;width:290px" data-trace="editor-click-cvtype"><select name="cvtype" lay-filter="cvtype"><option value="graduates">应届生 / 在校生</option><option value="working">职场人 / 有经验</option></select></div></div><div class="layui-inline" style="margin:10px 0px;"><label class="layui-form-label">简历语言</label><div class="layui-input-inline" style="margin:0 0 0 -1px;width:290px" data-trace="editor-click-cvlang"><select name="cvlang" lay-filter="cvlang"><option value="zh">中文简历</option><option value="en"'+("en"==context.cvlang?" selected":"")+'>英文简历</option></select></div></div><div class="layui-inline" style="margin:10px 0px;"><label class="layui-form-label">简历名称<font color="red"></font></label><div class="layui-input-inline" style="margin:0 0 0 -1px;width:290px" data-trace="editor-click-cvname"><input type="text" name="resume_name" lay-verify="limit" autocomplete="off" placeholder="如：产品经理_郭三刀" class="layui-input"></div></div></div></form><div style="margin:-15px auto;text-align:center;color:#bbb;font-size:13px;">模板随意切换<font size="4"> · </font>内容一键导入<font size="4"> · </font>多种格式下载<br>邮箱微信快速转发<font size="4"> · </font>招聘网站实时同步</div><style>a.start-edit-resume{height:38px;line-height:38px;padding:0 30px;font-size:18px;margin-bottom:20px;}.layui-form-pane .layui-form-label{color:#888;}</style>';var a=layer.open({type:1,title:"",content:b,anim:2,shade:0.7,area:"500px",btn:["开始写简历"],btnAlign:"c",closeBtn:false,success:function(e,d){c.render(null,"cvoptions");e.find(".layui-layer-content").css("overflow","visible");e.find(".layui-layer-btn0").addClass("start-edit-resume").attr("data-trace","editor-click-cvbegin");context.trace("editor-click-cvfirst")},yes:function(d,h){var e=h.find('select[name="cvtype"]').val();var g=h.find('select[name="cvlang"]').val();if(("zh"==context.tpllang)&&("en"==g)){layer.msg("该模板暂不支持英文简历",{time:0,btn:["知道了","更换模板"],btn1:function(j,k){layer.close(j)},btn2:function(j,k){layer.close(j);layer.close(a);$("#resume-tpl").click()}});return false}if(("en"==context.tpllang)&&("zh"==g)){layer.msg("该模板暂不支持中文简历",{time:0,btn:["知道了","更换模板"],btn1:function(j,k){layer.close(j)},btn2:function(j,k){layer.close(j);layer.close(a);$("#resume-tpl").click()}});return false}setResumeTypeAndLang(e,g);var f=h.find('input[name="resume_name"]').val();f=(f||"").replace(/(^\s*)|(\s*$)/g,"")||"未命名简历";$("span.resume-name").text(f);$('input[name="resumeName"]').val(f);layer.close(d);layer.tips("已有简历可直接导入",$("#operate-import"),{tips:[3,"#FFB800"],time:0,fixed:true,tipsMore:true,closeBtn:true,success:function(k,j){k.find(".layui-layer-close").css("top","-3px").css("right","-8px").attr("data-trace","editor-import-tipsclose")}})}})});function setResumeTypeAndLang(m,c){if("graduates"==m||"student"==m){var b=getTbodyByBlockTitle("求职意向");var k=getTbodyByBlockTitle("工作经历");var f=getTbodyByBlockTitle("实践经历");var a=getTbodyByBlockTitle("教育背景");b.removeAttr("display");k.attr("display","hide");f.find(".field-add-btn").attr("data-scroll","true").click();f.find(".field-add-btn").removeAttr("data-scroll")}else{var b=getTbodyByBlockTitle("求职意向");var a=getTbodyByBlockTitle("教育背景");var d=getTbodyByBlockTitle("自我评价");var g=getTbodyByBlockTitle("专业技能");var f=getTbodyByBlockTitle("实践经历");var k=getTbodyByBlockTitle("工作经历");var l=getTbodyByBlockTitle("奖项证书");var n=getTbodyByBlockTitle("兴趣爱好");b.removeAttr("display");g.removeAttr("display");f.attr("display","hide");l.attr("display","hide");n.attr("display","hide");k.find(".field-add-btn").attr("data-scroll","true").click();k.find(".field-add-btn").removeAttr("data-scroll")}if("en"==c){context.cvlang="en";$("#header-top .header-top-center .layui-badge").eq(1).text("英文简历");for(var j in context.blocktitle.zh){$('tbody .field-title-td .editable:contains("'+context.blocktitle.zh[j]+'")').text(context.blocktitle.en[j])}if("col"==$("#baseinfo").attr("format")){var e="";if(-1!=="tpl107|tpl126|tpl127|tpl131|tpl104|tpl116".indexOf(context.tplkey)){e=' style="color:#'+context.theme+';"';if("tpl131"==context.tplkey){e=' style="color:#'+context.theme+";border-bottom-color:#"+context.theme+';"'}}var h='<span class="baseinfo-item baseinfo-title"'+e+'><span class="baseinfo-value editable" key="name">Your Name</span></span>';h+='<span class="baseinfo-item baseinfo-fields">';h+='<span class="baseinfo-value editable" key="sex">Male</span>';h+='<span class="baseinfo-value editable" key="age" val="20" birthday="1999.12">20yrs Old</span>';h+='<span class="baseinfo-value editable" key="years">Graduates</span>';h+='<span class="baseinfo-value editable" key="edu">Bachelor\'s degree</span>';h+='<span class="baseinfo-value editable" key="mobile">151****4655</span>';h+='<span class="baseinfo-value editable" key="email">user@jianliben.com</span>';h+='<span class="baseinfo-value editable" key="job">Job Intention</span>';h+="</span>";h+='<span class="baseinfo-item baseinfo-intro"><span class="baseinfo-value editable" key="intro">Introduce yourself in one sentence.</span></span>';$("#baseinfo-panel-left").html(h)}else{$('#baseinfo span.baseinfo-value[key="name"]').text("Your Name");$('#baseinfo span.baseinfo-value[key="sex"]').text("Male");$('#baseinfo span.baseinfo-value[key="age"]').text("20yrs Old");$('#baseinfo span.baseinfo-value[key="years"]').text("Graduates");$('#baseinfo span.baseinfo-value[key="edu"]').text("Bachelor's degree");$('#baseinfo span.baseinfo-value[key="mobile"]').text("151****4655");$('#baseinfo span.baseinfo-value[key="email"]').text("user@jianliben.com");$('#baseinfo span.baseinfo-value[key="job"]').text("Job Intention");$('#baseinfo span.baseinfo-value[key="intro"]').text("Introduce yourself in one sentence.")}b.find(".editable").eq(1).html("<div>➢&nbsp;Job Intention</div>");b.find(".editable").eq(2).html("<div>➢&nbsp;Expected Salary</div>");b.find(".editable").eq(3).html("<div>➢&nbsp;Expected Location</div>");b.find(".editable").eq(4).html("<div>➢&nbsp;Arrive on duty time</div>")}}function getTbodyByBlockTitle(a){return $('tbody .field-title-td .editable:contains("'+a+'")').parent().parent().parent().parent()}function setResumeBlockKey(){for(var b in context.blocktitle.zh){if("baseinfo"==b){continue}var a=context.blocktitle.zh[b];getTbodyByBlockTitle(a).attr("key",b)}}setResumeBlockKey()}var winH=$(window).height();var slidH=$("#resume-tips-btn").height();$("#resume-tips-btn").css("top",(winH-slidH)/2-50+"px");$("#resume-tips-btn").click(function(){$("#resume-tips").animate({right:"0px"},200);$("#resume-tips-btn").hide();var a=$('#baseinfo span[key="job"]').text();$("#resume-tips input").val(a+" 范文");$("#resume-tips .layui-text a").eq(0).text(a+"完整简历范文").attr("href","http://zhannei.baidu.com/cse/search?s=12824040485760848050&q="+a+" 简历");$("#resume-tips .layui-text a").eq(1).text(a+"自我评价怎么写").attr("href","http://zhannei.baidu.com/cse/search?s=12824040485760848050&q="+a+" 自我评价");$("#resume-tips .layui-text a").eq(2).text(a+"工作经历案例").attr("href","http://zhannei.baidu.com/cse/search?s=12824040485760848050&q="+a+" 工作经历");$("#resume-tips .layui-text a").eq(3).text(a+"项目经验怎么写").attr("href","http://zhannei.baidu.com/cse/search?s=12824040485760848050&q="+a+" 项目经验")});$("#resume-tips .tips-close").click(function(){$("#resume-tips").animate({right:"-470px"},400)});$("#resume-shipin-tips .tips-close").click(function(){$("#resume-shipin-tips").animate({right:"-470px"},400)});$("#resume-advisor-tips .tips-close").click(function(){$("#resume-advisor-tips").animate({right:"-470px"},400)});$(".sm-right-gotop").click(function(){$("html,body").animate({scrollTop:"0px"},200)});$(".sm-right-kefu").click(function(){if("undefined"!=typeof(_MEIQIA)&&_MEIQIA.socketAlive){_MEIQIA("showPanel");$(".sm-right-kefu span").hide()}else{window.open("http://wpa.qq.com/msgrd?v=3&uin=442280685&site=qq&menu=yes")}});$(".sm-right-fanwen").click(function(){var a=this;$.ajax({type:"post",url:"/resume/helptips",data:{},async:false,dataType:"json",success:function(c){if(c.retCode==1){var b="";$.each(c.retText,function(e,f){b+='<li><span class="tips-cate-title">'+c.type[e]+'<i class="jlbfont icon-next"></i></span>';b+='<div class="tips-cate-child"><dl>';for(var d=0;d<f.length;d++){b+='<dd class="layui-btn layui-btn-sm layui-btn-primary">'+f[d].fan_title+"</dd>"}b+='</dl><div class="tips-cate-text">';for(var d=0;d<f.length;d++){b+='<div class="tips-cate-area">'+f[d].fan_content+"</div>"}b+="</div></div></li>"});$("#resume-tips .tips-cate").html(b);$("#resume-tips").animate({right:"0px"},200)}else{layer.tips('<font color="#666">'+c.retText+"</font>",$(a).find("i"),{tips:[4,"#fffadd"],tipsMore:true,closeBtn:true,success:function(e,d){e.css("left",(e.offset().left-20)+"px").find(".layui-layer-setwin").css("top","13px")}})}}})});$("#resume-tips").on("click",".tips-cate-child dd",function(){var a=$(".tips-cate-child dd").index($(this));$(".tips-cate-text div").hide();$(".tips-cate-text div:eq("+a+")").show();$(this).parent().find("dd.curr").removeClass("curr");$(this).addClass("curr")});$("#resume-tips").on("click",".tips-cate-title",function(){$("#resume-tips li").removeClass("curr-tips");$(this).parent().addClass("curr-tips");$("#resume-tips li:not(.curr-tips) .tips-cate-child").hide();$("#resume-tips li:not(.curr-tips) .tips-cate-title i").removeClass("icon-open");$(this).parent().find(".tips-cate-child").toggle();$(this).find("i").toggleClass("icon-open");$(this).parent().find(".tips-cate-child dd").eq(0).click();$("#resume-tips").get(0).scrollTo(0,0)});$(".sm-right-shipin").click(function(){var a=this;$.ajax({type:"post",url:"/resume/video",data:{},async:false,dataType:"json",success:function(c){if(c.retCode==1){var b="";$.each(c.retText.list,function(d,e){b+='<li class="timeline-item">';b+='<img class="j_open_video" data-id="'+e.v_id+'" data-dir="'+e.video_dir+'" src="'+context.thumb+"artimg/"+e.video_img+'" >';b+='<div class="resume-shipin-bg"><i class="layui-icon" style="font-size:40px;color:#fff;">&#xe652;</i></div>';b+="<span>"+e.video_title+"</span>";b+='<span><p style="display:inline-block;float:left;font-size:12px;color:#888;">'+e.view_count+'人看过</p><p style="display:inline-block;float:right;font-size:12px;color:#666;">'+e.video_author+"</p></span></li>"});$("#resume-shipin-tips .layui-timeline").html(b);$("#resume-shipin-tips").animate({right:"0px"},200)}else{layer.tips('<font color="#666">'+c.retText+"</font>",$(a).find("i"),{tips:[4,"#fffadd"],tipsMore:true,closeBtn:true,success:function(e,d){e.css("left",(e.offset().left-20)+"px").find(".layui-layer-setwin").css("top","13px")}})}}})});$(".sm-right-advisor").click(function(){layer.tips('<font color="#666">开发中...敬请期待！</font>',$(this).find("i"),{tips:[4,"#fffadd"],tipsMore:true,closeBtn:true,success:function(c,b){c.css("left",(c.offset().left-20)+"px").find(".layui-layer-setwin").css("top","13px")}});return;var a=this;$.ajax({type:"post",url:"/resume/advisor",data:{},async:false,dataType:"json",success:function(c){if(c.retCode==1){var b="";$.each(c.retText.list,function(d,e){b+='<li class="timeline-item">';b+='<div class="title">';b+='<img data-dir="'+e.photo+'" src="'+context.thumb+"photo/"+e.photo+'" >';b+="   <span>"+e.nickname+"</span>";b+="   <span>"+e.vocation+"</span>";b+="</div>";b+='<div class="resume-advisor-bg">'+e.brief+"</div>";if(e.status==1){b+='<a class="layui-btn layui-btn-primary" href="/advisor/detail/'+e.advisor_id+'" target="_blank"><i class="layui-icon" style="font-size:15px;">&#xe611;</i>申请服务</a>'}else{b+='<a class="layui-btn layui-btn-disabled" href="javascript:;"><i class="layui-icon" style="font-size:15px;">&#xe611;</i>暂停服务</a>'}b+="</li>"});$("#resume-advisor-tips .layui-timeline").html(b);$("#resume-advisor-tips").animate({right:"0px"},200)}else{layer.tips('<font color="#666">'+c.retText+"</font>",$(a).find("i"),{tips:[4,"#fffadd"],tipsMore:true,closeBtn:true,success:function(e,d){e.css("left",(e.offset().left-20)+"px").find(".layui-layer-setwin").css("top","13px")}})}}})});$("body").on("click",".resume-shipin-bg",function(){$.post("/video/seevideo",{v_id:$(this).prev().data("id")},function(){},"json");var a=$(this).prev().data("dir");var b='<video  src="'+context.thumb+"upload/"+a+'" controls="controls" autoplay="autoplay" style="height:100%;outline:none;"></video>';layer.open({type:1,title:false,content:b,area:["1000px","540px"],shade:0.7,shadeClose:true,success:function(c,d){c.find(".layui-layer-content").css("background","#000").css("text-align","center").css("padding","0px").css("overflow","hidden").css("height","550px")}})});$(".sm-right-help").click(function(){window.open(context.host+"article/help/")});$(".sm-right-mobile").click(function(){layer.tips('<font color="#666">开发中...敬请期待！</font>',$(this).find("i"),{tips:[4,"#fffadd"],tipsMore:true,closeBtn:true,success:function(b,a){b.css("left",(b.offset().left-20)+"px").find(".layui-layer-setwin").css("top","13px")}})});if(("editor"==context.page)&&-1!=$("#avater-img").attr("src").indexOf("avater_")){$("#avater-img").attr("src",context.res+"images/avater.jpg")}setInterval(function(){if(context.user){$.get(context.host+"resume/heartbeat",{},function(a){a=$.parseJSON(a);if(0!=a.retCode){if($(".header-top-right .jlb-login-link").size()<1){$(".header-top-right div").html('<a href="javascript:void(0);" class="jlb-login-link">登录 / 注册</a>')}if($("#login-tips").size()<1){$("body").append($('<div id="login-tips" style="padding-top:30px;position:fixed;left:0px;bottom:0px;z-index:10000000;width:100%;height:60px;background:rgba(0,0,0,0.8);text-align:center;font-size:16px;color:#fffffe;"><i class="layui-icon" style="font-size:18px;font-weight:bold;color:#FFB800;">&#xe702;</i> 您已长时间未操作，系统已自动退出登录，请登录后继续制作简历<a href="javascript:void(0);" class="jlb-login-link" style="display: inline-block;width: 70px;height: 30px;line-height: 30px;margin-left: 10px;border-radius: 4px;color: #fff;background-color: #1E9FFF;">登录</a></div>'))}$("#login-tips .jlb-login-link").click();context.user=""}})}},1*10*1000);setTimeout(function(){if(!context.user){if($("#login-tips").size()<1){$('<div id="login-tips" style="display:none;padding-top:30px;position:fixed;left:0px;bottom:0px;z-index:10000000;width:100%;height:60px;background:rgba(0,0,0,0.8);text-align:center;font-size:16px;color:#fffffe;"><i class="layui-icon" style="font-size:18px;font-weight:bold;color:#FFB800;">&#xe702;</i> 当前处于未登录状态，简历不会被保存，请登录后开始制作简历<a href="javascript:void(0);" class="jlb-login-link" data-trace="editor-click-logindn" style="display: inline-block;width: 70px;height: 30px;line-height: 30px;margin-left: 10px;border-radius: 4px;color: #fff;background-color: #1E9FFF;">登录</a></div>').appendTo($("body")).slideDown(500)}}},4000);